{
  "candidates": [
    {
      "content": {
        "parts": [
          {
            "text": "```json\n{\n  \"upgraded_tsx\": \"import { useState, useCallback, useMemo, useEffect } from \\\"react\\\";\\nimport { trpc } from \\\"@/lib/trpc\\\";\\nimport { useAuth } from \\\"@/_core/hooks/useAuth\\\";\\nimport { Button } from \\\"@/components/ui/button\\\";\\nimport { Badge } from \\\"@/components/ui/badge\\\";\\nimport FVMCelebration from \\\"@/components/FVMCelebration\\\";\\nimport { FadeInView, StaggerContainer, StaggerItem } from \\\"@/components/PageTransition\\\";\\nimport { motion } from \\\"framer-motion\\\";\\nimport { SmoothReveal, GlowingBorder, SmoothCounter } from \\\"@/components/PremiumAnimations\\\";\\nimport {\\n  Shield,\\n  ShieldCheck,\\n  TrendingUp,\\n  Award,\\n  Clock,\\n  Users,\\n  Star,\\n  FileCheck,\\n  Lock,\\n  Copy,\\n  QrCode,\\n  ChevronRight,\\n  Check,\\n  Upload,\\n  X,\\n  Info,\\n  Fingerprint, // Added Fingerprint icon\\n} from \\\"lucide-react\\\";\\nimport { toast } from \\\"sonner\\\";\\n\\n// ─── Design Tokens ───────────────────────────────────────────\\nconst C = {\\n  navy: \\\"#0A1628\\\",\\n  gold: \\\"#C4972A\\\",\\n  blue: \\\"#2563EB\\\",\\n  green: \\\"#059669\\\",\\n  red: \\\"#DC2626\\\",\\n  steel: \\\"#1E3A5F\\\",\\n  surface: \\\"#F3F7FC\\\",\\n  border: \\\"#D1DCF0\\\",\\n} as const;\\n\\n// ─── Radar / Score Dimensions ────────────────────────────────\\n// Whitepaper-aligned Trust Score components\\nconst DIMENSIONS_CONFIG = [\\n  { key: \\\"kyb_depth\\\", label: \\\"KYB Depth\\\", score: 90, icon: ShieldCheck, status: \\\"Verified\\\" },\\n  { key: \\\"transaction_history\\\", label: \\\"Transaction History\\\", score: 80, icon: Award, status: \\\"Auto\\\" },\\n  { key: \\\"dispute_outcomes\\\", label: \\\"Dispute Outcomes\\\", score: 70, icon: Info, status: \\\"Auto\\\" },\\n  { key: \\\"peer_attestations\\\", label: \\\"Peer Attestations\\\", score: 85, icon: Users, status: \\\"Auto\\\" },\\n  { key: \\\"platform_tenure\\\", label: \\\"Platform Tenure\\\", score: 60, icon: Clock, status: \\\"Auto\\\" },\\n  { key: \\\"identity_verification\\\", label: \\\"Identity Verification\\\", score: 95, icon: Fingerprint, status: \\\"Verified\\\" },\\n] as const;\\n\\nconst TIER_FEATURES = [\\n  { label: \\\"Deal value access\\\", t1: \\\"Up to $1M\\\", t2: \\\"Up to $50M\\\", t3: \\\"Unlimited\\\" },\\n  { label: \\\"Counterparty access\\\", t1: \\\"Basic only\\\", t2: \\\"Enhanced + Basic\\\", t3: \\\"All tiers\\\" },\\n  { label: \\\"Match priority\\\", t1: \\\"Standard\\\", t2: \\\"Priority\\\", t3: \\\"Premium\\\" },\\n  { label: \\\"Founding member\\\", t1: \\\"No\\\", t2: \\\"Eligible\\\", t3: \\\"Included\\\" },\\n];\\n\\nconst AML_QUESTIONS = [\\n  \\\"Are all funds derived from legitimate business activities?\\\",\\n  \\\"Are you or any beneficial owner a Politically Exposed Person (PEP)?\\\",\\n  \\\"Have you or your organization been subject to any sanctions or enforcement actions?\\\",\\n  \\\"Can you provide documentation for the source of funds used in transactions?\\\",\\n];\\n\\n// TODO: replace with live trpc.user.getTrustScoreHistory data\\nconst SCORE_HISTORY = [65, 68, 72, 74, 78, 84];\\n\\nconst DOC_TYPES = [\\n  \\\"government_id\\\",\\n  \\\"passport\\\",\\n  \\\"business_license\\\",\\n  \\\"incorporation_docs\\\",\\n  \\\"proof_of_address\\\",\\n  \\\"bank_statement\\\",\\n  \\\"tax_document\\\",\\n  \\\"accreditation_letter\\\",\\n] as const;\\n\\n// ─── Constants ───────────────────────────────────────────────\\nconst PARTNER_COUNT = 12; // TODO: source from live data\\n\\nfunction VerificationDocumentsSection() {\\n  const utils = trpc.useUtils();\\n  const { data: docs = [] } = trpc.user.getVerificationDocuments.useQuery();\\n  const requestUpload = trpc.verification.requestUpload.useMutation();\\n  const confirmUpload = trpc.verification.confirmUpload.useMutation({\\n    onSuccess: () =\u003e {\\n      utils.user.getVerificationDocuments.invalidate();\\n      utils.user.getTrustScore.invalidate();\\n      toast.success(\\\"Document submitted for review\\\");\\n    },\\n    onError: (e) =\u003e toast.error(e.message),\\n  });\\n\\n  const [docType, setDocType] = useState\u003ctypeof DOC_TYPES[number]\u003e(\\\"government_id\\\");\\n  const [file, setFile] = useState\u003cFile | null\u003e(null);\\n  const [uploading, setUploading] = useState(false);\\n\\n  const handleUpload = useCallback(async () =\u003e {\\n    if (!file) return;\\n    setUploading(true);\\n    try {\\n      const { key } = await requestUpload.mutateAsync({\\n        documentType: docType,\\n        mimeType: file.type || \\\"application/octet-stream\\\",\\n      });\\n      await confirmUpload.mutateAsync({ fileKey: key, documentType: docType });\\n      setFile(null);\\n    } catch (e) {\\n      toast.error(e instanceof Error ? e.message : \\\"Upload failed\\\");\\n    } finally {\\n      setUploading(false);\\n    }\\n  }, [file, docType, requestUpload, confirmUpload]);\\n\\n  const statusBadge = (status: string) =\u003e {\\n    const cls =\\n      status === \\\"approved\\\"\\n        ? \\\"bg-[#059669]/15 text-[#059669]\\\"\\n        : status === \\\"rejected\\\"\\n          ? \\\"bg-red-500/15 text-red-600\\\"\\n          : \\\"bg-[#F59E0B]/15 text-[#F59E0B]\\\";\\n    return (\\n      \u003cspan className={`rounded-full px-2 py-0.5 text-[10px] font-bold uppercase tracking-wider ${cls}`}\u003e\\n        {status}\\n      \u003c/span\u003e\\n    );\\n  };\\n\\n  return (\\n    \u003cdiv className=\\\"card-elevated p-6\\\"\u003e\\n      \u003ch3 className=\\\"mb-4 data-label\\\"\u003eVerification Documents\u003c/h3\u003e\\n      \u003cp className=\\\"text-sm mb-6\\\" style={{ color: `${C.navy}70` }}\u003e\\n        Upload your first verification document. Accepted: gov ID, business license, proof of address.\\n      \u003c/p\u003e\\n\\n      {docs.length \u003e 0 && (\\n        \u003cdiv className=\\\"mb-6 space-y-3\\\"\u003e\\n          {docs.map((d: any) =\u003e (\\n            \u003cdiv\\n              key={d.id}\\n              className=\\\"flex items-center justify-between p-3 rounded-lg\\\"\\n              style={{ backgroundColor: `${C.navy}06`, borderColor: C.border, borderWidth: 1 }}\\n            \u003e\\n              \u003cdiv className=\\\"flex items-center gap-3\\\"\u003e\\n                \u003cFileCheck className=\\\"w-5 h-5\\\" style={{ color: C.blue }} /\u003e\\n                \u003cdiv\u003e\\n                  \u003cp className=\\\"text-sm font-medium\\\" style={{ color: C.navy }}\u003e\\n                    {String(d.documentType).replace(/_/g, \\\" \\\")}\\n                  \u003c/p\u003e\\n                  \u003cp className=\\\"text-xs\\\" style={{ color: `${C.navy}60` }}\u003e\\n                    {new Date(d.createdAt).toLocaleDateString()}\\n                  \u003c/p\u003e\\n                \u003c/div\u003e\\n              \u003c/div\u003e\\n              {statusBadge(d.status ?? \\\"pending\\\")}\\n            \u003c/div\u003e\\n          ))}\\n        \u003c/div\u003e\\n      )}\\n\\n      \u003cdiv\\n        className=\\\"rounded-xl border-2 border-dashed p-6 transition-colors flex flex-col items-center justify-center gap-3 cursor-pointer\\\"\\n        style={{\\n          borderColor: file ? C.green : C.border,\\n          backgroundColor: file ? `${C.green}08` : \\\"white\\\",\\n        }}\\n        onDragOver={(e) =\u003e e.preventDefault()}\\n        onDrop={(e) =\u003e {\\n          e.preventDefault();\\n          const f = e.dataTransfer.files[0];\\n          if (f && /\\\\.(pdf|jpg|jpeg|png)$/i.test(f.name)) setFile(f);\\n        }}\\n        onClick={() =\u003e {\\n          const input = document.createElement(\\\"input\\\");\\n          input.type = \\\"file\\\";\\n          input.accept = \\\".pdf,.jpg,.jpeg,.png\\\";\\n          input.onchange = (ev) =\u003e {\\n            const f = (ev.target as HTMLInputElement).files?.[0];\\n            if (f) setFile(f);\\n          };\\n          input.click();\\n        }}\\n      \u003e\\n        \u003cselect\\n          value={docType}\\n          onChange={(e) =\u003e setDocType(e.target.value as typeof DOC_TYPES[number])}\\n          className=\\\"rounded-lg px-3 py-2 text-sm border mb-2\\\"\\n          style={{ borderColor: C.border }}\\n          onClick={(e) =\u003e e.stopPropagation()}\\n        \u003e\\n          {DOC_TYPES.map((t) =\u003e (\\n            \u003coption key={t} value={t}\u003e\\n              {t.replace(/_/g, \\\" \\\")}\\n            \u003c/option\u003e\\n          ))}\\n        \u003c/select\u003e\\n        {file ? (\\n          \u003cdiv className=\\\"flex flex-col items-center gap-2\\\"\u003e\\n            \u003cdiv className=\\\"flex items-center gap-2 text-sm\\\" style={{ color: C.green }}\u003e\\n              \u003cCheck className=\\\"w-4 h-4\\\" /\u003e\\n              {file.name}\\n            \u003c/div\u003e\\n            \u003cButton\\n              size=\\\"sm\\\"\\n              className=\\\"cursor-pointer\\\"\\n              style={{ backgroundColor: C.gold, color: \\\"white\\\" }}\\n              onClick={(e) =\u003e {\\n                e.stopPropagation();\\n                handleUpload();\\n              }}\\n              disabled={uploading}\\n            \u003e\\n              {uploading ? \\\"Uploading…\\\" : \\\"Submit for Review\\\"}\\n            \u003c/Button\u003e\\n          \u003c/div\u003e\\n        ) : (\\n          \u003c\u003e\\n            \u003cUpload className=\\\"w-8 h-8\\\" style={{ color: C.steel }} /\u003e\\n            \u003cspan className=\\\"text-sm font-medium\\\" style={{ color: C.steel }}\u003e\\n              Drag & drop or click to upload\\n            \u003c/span\u003e\\n            \u003cspan className=\\\"text-xs\\\" style={{ color: `${C.navy}80` }}\u003e\\n              PDF, JPG, or PNG — max 10MB\\n            \u003c/span\u003e\\n          \u003c/\u003e\\n        )}\\n      \u003c/div\u003e\\n    \u003c/div\u003e\\n  );\\n}\\n\\nfunction TrustScoreHistorySection() {\\n  const [expanded, setExpanded] = useState(false);\\n  const { data: history, isLoading } = trpc.user.getTrustScoreHistory.useQuery({ limit: 10 }, { enabled: expanded });\\n  const hasHistory = (history?.length ?? 0) \u003e 0;\\n  return (\\n    \u003cdiv className=\\\"mt-6 pt-6 border-t\\\" style={{ borderColor: C.border }}\u003e\\n      \u003cbutton\\n        onClick={() =\u003e setExpanded(!expanded)}\\n        className=\\\"flex items-center gap-2 text-sm font-medium w-full cursor-pointer hover:opacity-80\\\"\\n        style={{ color: C.steel }}\\n      \u003e\\n        \u003cChevronRight className={`w-4 h-4 transition-transform ${expanded ? \\\"rotate-90\\\" : \\\"\\\"}`} /\u003e\\n        Trust Score History\\n      \u003c/button\u003e\\n      {expanded && (\\n        \u003cdiv className=\\\"mt-3 space-y-2\\\"\u003e\\n          {isLoading && \u003cp className=\\\"text-sm\\\" style={{ color: `${C.navy}60` }}\u003eLoading…\u003c/p\u003e}\\n          {!isLoading && !hasHistory && (\\n            \u003cp className=\\\"text-sm\\\" style={{ color: `${C.navy}60` }}\u003e\\n              Your Trust Score will update as you complete deals and receive reviews.\\n            \u003c/p\u003e\\n          )}\\n          {!isLoading && hasHistory &&\\n            history!.map((h) =\u003e {\\n              const prev = Number(h.previousScore ?? 0);\\n              const next = Number(h.newScore ?? 0);\\n              const delta = next - prev;\\n              return (\\n                \u003cdiv key={h.id} className=\\\"flex items-center justify-between text-sm py-2 px-3 rounded-lg\\\" style={{ backgroundColor: `${C.navy}06` }}\u003e\\n                  \u003cspan style={{ color: C.navy }}\u003e{h.changeReason}\u003c/span\u003e\\n                  \u003cspan className={delta \u003e= 0 ? \\\"font-semibold\\\" : \\\"\\\"} style={{ color: delta \u003e= 0 ? C.green : C.red }}\u003e\\n                    {delta \u003e= 0 ? `+${delta}` : delta}\\n                  \u003c/span\u003e\\n                \u003c/div\u003e\\n              );\\n            })}\\n        \u003c/div\u003e\\n      )}\\n    \u003c/div\u003e\\n  );\\n}\\n\\n// ─── SVG Helpers ─────────────────────────────────────────────\\nfunction polarToCartesian(cx: number, cy: number, r: number, angleDeg: number) {\\n  const rad = ((angleDeg - 90) * Math.PI) / 180;\\n  return { x: cx + r * Math.cos(rad), y: cy + r * Math.sin(rad) };\\n}\\n\\nfunction hexPoints(cx: number, cy: number, r: number): string {\\n  return Array.from({ length: 6 })\\n    .map((_, i) =\u003e {\\n      const p = polarToCartesian(cx, cy, r, i * 60);\\n      return `${p.x},${p.y}`;\\n    })\\n    .join(\\\" \\\");\\n}\\n\\nfunction RadarChart({ scores, size = 240 }: { scores: number[]; size?: number }) {\\n  const cx = size / 2;\\n  const cy = size / 2;\\n  const maxR = size / 2 - 20;\\n  const levels = [0.2, 0.4, 0.6, 0.8, 1.0];\\n\\n  const dataPoints = scores.map((s, i) =\u003e {\\n    const r = (s / 100) * maxR;\\n    return polarToCartesian(cx, cy, r, i * 60);\\n  });\\n  const dataPolygon = dataPoints.map((p) =\u003e `${p.x},${p.y}`).join(\\\" \\\");\\n\\n  return (\\n    \u003csvg width={size} height={size} viewBox={`0 0 ${size} ${size}`}\u003e\\n      {levels.map((l) =\u003e (\\n        \u003cpolygon\\n          key={l}\\n          points={hexPoints(cx, cy, maxR * l)}\\n          fill=\\\"none\\\"\\n          stroke={C.navy}\\n          strokeWidth={0.5}\\n          opacity={0.2}\\n        /\u003e\\n      ))}\\n      {Array.from({ length: 6 }).map((_, i) =\u003e {\\n        const p = polarToCartesian(cx, cy, maxR, i * 60);\\n        return \u003cline key={i} x1={cx} y1={cy} x2={p.x} y2={p.y} stroke={C.navy} strokeWidth={0.5} opacity={0.15} /\u003e;\\n      })}\\n      \u003cpolygon points={dataPolygon} fill={C.blue} fillOpacity={0.3} stroke={C.blue} strokeWidth={2} /\u003e\\n      {dataPoints.map((p, i) =\u003e (\\n        \u003ccircle key={i} cx={p.x} cy={p.y} r={3} fill={C.blue} /\u003e\\n      ))}\\n      {DIMENSIONS_CONFIG.map((d, i) =\u003e { // Use DIMENSIONS_CONFIG for labels\\n        const p = polarToCartesian(cx, cy, maxR + 14, i * 60);\\n        return (\\n          \u003ctext\\n            key={d.key}\\n            x={p.x}\\n            y={p.y}\\n            textAnchor=\\\"middle\\\"\\n            dominantBaseline=\\\"middle\\\"\\n            fontSize={8}\\n            fill={C.navy}\\n            fontWeight={600}\\n          \u003e\\n            {Math.round(scores[i])}% {/* Display the actual score from the `scores` prop */}\\n          \u003c/text\u003e\\n        );\\n      })}\\n    \u003c/svg\u003e\\n  );\\n}\\n\\nfunction MiniLineChart({ data, width = 200, height = 80 }: { data: number[]; width?: number; height?: number }) {\\n  const pad = 8;\\n  const min = Math.min(...data) - 5;\\n  const max = Math.max(...data) + 5;\\n  const xStep = (width - pad * 2) / (data.length - 1);\\n\\n  const points = data.map((v, i) =\u003e ({\\n    x: pad + i * xStep,\\n    y: pad + ((max - v) / (max - min)) * (height - pad * 2),\\n  }));\\n\\n  const polyline = points.map((p) =\u003e `${p.x},${p.y}`).join(\\\" \\\");\\n  const areaPath = `M${points[0].x},${height} ${points.map((p) =\u003e `L${p.x},${p.y}`).join(\\\" \\\")} L${points[points.length - 1].x},${height} Z`;\\n\\n  return (\\n    \u003csvg width={width} height={height} viewBox={`0 0 ${width} ${height}`}\u003e\\n      \u003cpath d={areaPath} fill={C.blue} fillOpacity={0.1} /\u003e\\n      \u003cpolyline points={polyline} fill=\\\"none\\\" stroke={C.navy} strokeWidth={2} strokeLinejoin=\\\"round\\\" /\u003e\\n      {points.map((p, i) =\u003e (\\n        \u003ccircle key={i} cx={p.x} cy={p.y} r={2.5} fill={C.navy} /\u003e\\n      ))}\\n    \u003c/svg\u003e\\n  );\\n}\\n\\nfunction ShareLinkRow({ url }: { url: string }) {\\n  const [copied, setCopied] = useState(false);\\n\\n  const handleCopy = () =\u003e {\\n    navigator.clipboard.writeText(url);\\n    setCopied(true);\\n    toast.success(\\\"Link copied!\\\");\\n    setTimeout(() =\u003e setCopied(false), 2000);\\n  };\\n\\n  return (\\n    \u003cdiv className=\\\"flex items-center gap-2\\\"\u003e\\n      \u003cinput\\n        readOnly\\n        value={url}\\n        className=\\\"flex-1 rounded-lg text-sm font-mono px-4\\\"\\n        style={{ height: 48, border: `1px solid ${C.border}`, color: C.navy }}\\n      /\u003e\\n      \u003cButton\\n        variant=\\\"outline\\\"\\n        className=\\\"cursor-pointer\\\"\\n        style={{ height: 48, borderColor: C.border, transition: \\\"all 0.3s\\\" }}\\n        onClick={handleCopy}\\n      \u003e\\n        {copied ? (\\n          \u003cCheck className=\\\"w-4 h-4 text-green-600 transition-transform scale-110\\\" /\u003e\\n        ) : (\\n          \u003cCopy className=\\\"w-4 h-4\\\" /\u003e\\n        )}\\n      \u003c/Button\u003e\\n    \u003c/div\u003e\\n  );\\n}\\n\\n// ─── Drag-Drop Zone ──────────────────────────────────────────\\nfunction DropZone({\\n  label,\\n  file,\\n  onFile,\\n}: {\\n  label: string;\\n  file: File | null;\\n  onFile: (f: File) =\u003e void;\\n}) {\\n  const [dragging, setDragging] = useState(false);\\n\\n  return (\\n    \u003cdiv\\n      className=\\\"relative rounded-xl border-2 border-dashed transition-colors flex flex-col items-center justify-center gap-2 cursor-pointer\\\"\\n      style={{\\n        borderColor: dragging ? C.blue : C.border,\\n        backgroundColor: dragging ? `${C.blue}08` : \\\"white\\\",\\n        height: 120,\\n      }}\\n      onDragOver={(e) =\u003e {\\n        e.preventDefault();\\n        setDragging(true);\\n      }}\\n      onDragLeave={() =\u003e setDragging(false)}\\n      onDrop={(e) =\u003e {\\n        e.preventDefault();\\n        setDragging(false);\\n        if (e.dataTransfer.files[0]) onFile(e.dataTransfer.files[0]);\\n      }}\\n      onClick={() =\u003e {\\n        const input = document.createElement(\\\"input\\\");\\n        input.type = \\\"file\\\";\\n        input.accept = \\\".pdf,.jpg,.png\\\";\\n        input.onchange = (ev) =\u003e {\\n          const f = (ev.target as HTMLInputElement).files?.[0];\\n          if (f) onFile(f);\\n        };\\n        input.click();\\n      }}\\n    \u003e\\n      {file ? (\\n        \u003cdiv className=\\\"flex items-center gap-2 text-sm\\\" style={{ color: C.green }}\u003e\\n          \u003cCheck className=\\\"w-4 h-4\\\" /\u003e\\n          {file.name}\\n        \u003c/div\u003e\\n      ) : (\\n        \u003c\u003e\\n          \u003cUpload className=\\\"w-5 h-5\\\" style={{ color: C.steel }} /\u003e\\n          \u003cspan className=\\\"text-sm font-medium\\\" style={{ color: C.steel }}\u003e\\n            {label}\\n          \u003c/span\u003e\\n          \u003cspan className=\\\"text-xs\\\" style={{ color: `${C.navy}80` }}\u003e\\n            PDF, JPG, or PNG — drag & drop or click\\n          \u003c/span\u003e\\n        \u003c/\u003e\\n      )}\\n    \u003c/div\u003e\\n  );\\n}\\n\\n// ─── Upgrade Modal ───────────────────────────────────────────\\nfunction UpgradeModal({ onClose }: { onClose: () =\u003e void }) {\\n  const [step, setStep] = useState(0);\\n  const [bizDoc, setBizDoc] = useState\u003cFile | null\u003e(null);\\n  const [govId, setGovId] = useState\u003cFile | null\u003e(null);\\n  const [answers, setAnswers] = useState\u003c(boolean | null)[]\u003e([null, null, null, null]);\\n  const [showCelebration, setShowCelebration] = useState(false);\\n\\n  const allAnswered = answers.every((a) =\u003e a !== null);\\n\\n  const handleSubmit = useCallback(() =\u003e {\\n    setStep(3);\\n    setTimeout(() =\u003e setShowCelebration(true), 3000);\\n  }, []);\\n\\n  if (showCelebration) {\\n    return (\\n      \u003cFVMCelebration\\n        title=\\\"Tier 2 Verified!\\\"\\n        subtitle=\\\"You now have access to deals up to $50M and enhanced counterparty matching.\\\"\\n        ctaLabel=\\\"Continue to Dashboard\\\"\\n        onCta={onClose}\\n        icon={\u003cShieldCheck className=\\\"h-8 w-8\\\" style={{ color: C.green }} /\u003e}\\n      /\u003e\\n    );\\n  }\\n\\n  return (\\n    \u003cdiv className=\\\"fixed inset-0 z-50 flex items-center justify-center\\\"\u003e\\n      \u003cdiv className=\\\"absolute inset-0 bg-[#0A1628]/60 backdrop-blur-sm\\\" onClick={onClose} /\u003e\\n      \u003cdiv className=\\\"relative z-10 mx-4 w-full max-w-lg rounded-2xl bg-white shadow-2xl animate-fade-in overflow-hidden\\\"\u003e\\n        \u003cdiv className=\\\"flex items-center justify-between px-6 py-4 bg-slate-900\\\"\u003e\\n          \u003ch3 className=\\\"text-white font-bold text-lg\\\"\u003eUpgrade to Tier 2\u003c/h3\u003e\\n          \u003cbutton onClick={onClose} className=\\\"text-white/60 hover:text-white transition-colors cursor-pointer\\\"\u003e\\n            \u003cX className=\\\"w-5 h-5\\\" /\u003e\\n          \u003c/button\u003e\\n        \u003c/div\u003e\\n\\n        \u003cdiv className=\\\"flex gap-1 px-6 pt-4\\\"\u003e\\n          {[0, 1, 2, 3].map((s) =\u003e (\\n            \u003cdiv\\n              key={s}\\n              className={`h-1 flex-1 rounded-full transition-colors ${step \u003e= s ? \\\"bg-blue-600\\\" : \\\"bg-slate-200\\\"}`}\\n            /\u003e\\n          ))}\\n        \u003c/div\u003e\\n\\n        \u003cdiv className=\\\"p-6\\\"\u003e\\n          {step === 0 && (\\n            \u003cdiv className=\\\"space-y-4\\\"\u003e\\n              \u003ch4 className=\\\"font-bold text-lg text-slate-900\\\"\u003e\\n                What Tier 2 Unlocks\\n              \u003c/h4\u003e\\n              \u003cul className=\\\"space-y-3\\\"\u003e\\n                {[\\n                  \\\"Deal access up to $50M (from $1M)\\\",\\n                  \\\"Enhanced + Basic counterparty matching\\\",\\n                  \\\"Priority match queue placement\\\",\\n                  \\\"Founding member eligibility\\\",\\n                ].map((item) =\u003e (\\n                  \u003cli key={item} className=\\\"flex items-start gap-3 text-sm\\\" style={{ color: C.steel }}\u003e\\n                    \u003cCheck className=\\\"w-4 h-4 mt-0.5 flex-shrink-0\\\" style={{ color: C.green }} /\u003e\\n                    {item}\\n                  \u003c/li\u003e\\n                ))}\\n              \u003c/ul\u003e\\n              \u003cButton\\n                className=\\\"w-full cursor-pointer\\\"\\n                style={{ backgroundColor: C.gold, color: \\\"white\\\", height: 48 }}\\n                onClick={() =\u003e setStep(1)}\\n              \u003e\\n                Continue \u003cChevronRight className=\\\"w-4 h-4 ml-1\\\" /\u003e\\n              \u003c/Button\u003e\\n            \u003c/div\u003e\\n          )}\\n\\n          {step === 1 && (\\n            \u003cdiv className=\\\"space-y-4\\\"\u003e\\n              \u003ch4 className=\\\"font-bold text-lg text-slate-900\\\"\u003e\\n                Document Upload\\n              \u003c/h4\u003e\\n              \u003cDropZone label=\\\"Business Registration\\\" file={bizDoc} onFile={setBizDoc} /\u003e\\n              \u003cDropZone label=\\\"Government-Issued ID\\\" file={govId} onFile={setGovId} /\u003e\\n              \u003cButton\\n                className=\\\"w-full cursor-pointer\\\"\\n                style={{ backgroundColor: C.blue, color: \\\"white\\\", height: 48 }}\\n                disabled={!bizDoc || !govId}\\n                onClick={() =\u003e setStep(2)}\\n              \u003e\\n                Continue \u003cChevronRight className=\\\"w-4 h-4 ml-1\\\" /\u003e\\n              \u003c/Button\u003e\\n            \u003c/div\u003e\\n          )}\\n\\n          {step === 2 && (\\n            \u003cdiv className=\\\"space-y-4\\\"\u003e\\n              \u003ch4 className=\\\"font-bold text-lg text-slate-900\\\"\u003e\\n                AML Questionnaire\\n              \u003c/h4\u003e\\n              {AML_QUESTIONS.map((q, i) =\u003e (\\n                \u003cdiv key={i} className=\\\"space-y-2\\\"\u003e\\n                  \u003cp className=\\\"text-sm font-medium\\\" style={{ color: C.steel }}\u003e\\n                    {i + 1}. {q}\\n                  \u003c/p\u003e\\n                  \u003cdiv className=\\\"flex gap-3\\\"\u003e\\n                    {([\\\"Yes\\\", \\\"No\\\"] as const).map((opt) =\u003e {\\n                      const selected = answers[i] === (opt === \\\"Yes\\\");\\n                      return (\\n                        \u003cbutton\\n                          key={opt}\\n                          className=\\\"px-4 rounded-lg text-sm font-medium transition-colors cursor-pointer\\\"\\n                          style={{\\n                            height: 48,\\n                            border: `1.5px solid ${selected ? C.blue : C.border}`,\\n                            backgroundColor: selected ? `${C.blue}10` : \\\"white\\\",\\n                            color: selected ? C.blue : C.steel,\\n                          }}\\n                          onClick={() =\u003e {\\n                            const next = [...answers];\\n                            next[i] = opt === \\\"Yes\\\";\\n                            setAnswers(next);\\n                          }}\\n                        \u003e\\n                          {opt}\\n                        \u003c/button\u003e\\n                      );\\n                    })}\\n                  \u003c/div\u003e\\n                \u003c/div\u003e\\n              ))}\\n              \u003cButton\\n                className=\\\"w-full cursor-pointer\\\"\\n                style={{ backgroundColor: C.blue, color: \\\"white\\\", height: 48 }}\\n                disabled={!allAnswered}\\n                onClick={handleSubmit}\\n              \u003e\\n                Submit for Review\\n              \u003c/Button\u003e\\n            \u003c/div\u003e\\n          )}\\n\\n          {step === 3 && (\\n            \u003cdiv className=\\\"flex flex-col items-center text-center py-8 space-y-4\\\"\u003e\\n              \u003cdiv className=\\\"relative w-16 h-16\\\"\u003e\\n                \u003cdiv\\n                  className=\\\"absolute inset-0 rounded-full animate-spin\\\"\\n                  style={\\n                    {\\n                      border: `3px solid ${C.border}`,\\n                      borderTopColor: C.blue,\\n                    }\\n                  }\\n                /\u003e\\n              \u003c/div\u003e\\n              \u003ch4 className=\\\"font-bold text-lg text-slate-900\\\"\u003e\\n                Under Review\\n              \u003c/h4\u003e\\n              \u003cp className=\\\"text-sm\\\" style={{ color: C.steel }}\u003e\\n                Your application is being reviewed — typically under 24 hours.\\n              \u003c/p\u003e\\n            \u003c/div\u003e\\n          )}\\n        \u003c/div\u003e\\n      \u003c/div\u003e\\n    \u003c/div\u003e\\n  );\\n}\\n\\n// ─── Score Color ─────────────────────────────────────────────\\nfunction scoreColor(score: number) {\\n  if (score \u003e= 80) return C.green;\\n  if (score \u003e= 60) return C.gold;\\n  return C.red;\\n}\\n\\nfunction statusPill(status: string) {\\n  const cls: Record\u003cstring, string\u003e = {\\n    Verified: \\\"bg-[#059669]/15 text-[#059669] rounded-full px-2 py-0.5 text-[10px] font-bold uppercase tracking-wider\\\",\\n    Pending:  \\\"bg-[#F59E0B]/15 text-[#F59E0B] rounded-full px-2 py-0.5 text-[10px] font-bold uppercase tracking-wider\\\",\\n    Auto:     \\\"bg-[#2563EB]/10 text-[#2563EB] rounded-full px-2 py-0.5 text-[10px] font-bold uppercase tracking-wider\\\",\\n  };\\n  return (\\n    \u003cspan className={cls[status] ?? cls.Auto}\u003e\\n      {status}\\n    \u003c/span\u003e\\n  );\\n}\\n\\n// ─── Dimension Border Color ──────────────────────────────────\\nfunction dimBorderColor(score: number) {\\n  if (score \u003e= 80) return C.green;\\n  if (score \u003e= 60) return C.blue;\\n  return C.gold;\\n}\\n\\n// ─── Shield Badge SVG ────────────────────────────────────────\\nfunction TierShieldBadge({ tier, size = 64 }: { tier: number; size?: number }) {\\n  return (\\n    \u003csvg width={size} height={size} viewBox=\\\"0 0 64 64\\\"\u003e\\n      \u003cpath\\n        d=\\\"M32 4 L56 16 V36 C56 50 32 60 32 60 C32 60 8 50 8 36 V16 Z\\\"\\n        fill={tier \u003e= 2 ? C.gold : C.steel}\\n        opacity={0.15}\\n        stroke={tier \u003e= 2 ? C.gold : C.steel}\\n        strokeWidth={2}\\n      /\u003e\\n      \u003ctext x=\\\"32\\\" y=\\\"38\\\" textAnchor=\\\"middle\\\" fontSize=\\\"22\\\" fontWeight=\\\"bold\\\" fill={tier \u003e= 2 ? C.gold : C.steel}\u003e\\n        {tier}\\n      \u003c/text\u003e\\n    \u003c/svg\u003e\\n  );\\n}\\n\\n// ═════════════════════════════════════════════════════════════\\n// Main Component\\n// ═════════════════════════════════════════════════════════════\\nexport default function Verification() {\\n  const { user } = useAuth();\\n  const { data: docs } = trpc.user.getVerificationDocuments.useQuery();\\n  const { data: reviews } = trpc.user.getPeerReviews.useQuery();\\n  const { data: trustData } = trpc.user.getTrustScore.useQuery();\\n  const [upgradeOpen, setUpgradeOpen] = useState(false);\\n  const [shareUrl, setShareUrl] = useState\u003cstring | null\u003e(null);\\n\\n  const tierRaw = (user as any)?.verificationTier ?? \\\"none\\\";\\n  const tier = tierRaw === \\\"institutional\\\" ? 3 : tierRaw === \\\"enhanced\\\" ? 2 : tierRaw === \\\"basic\\\" ? 1 : 1;\\n  const trustScore = (trustData?.total ?? Number((user as any)?.trustScore ?? 0)) || 0;\\n\\n  const tierName = useMemo(() =\u003e {\\n    if (tier === 1) return \\\"Basic\\\";\\n    if (tier === 2) return \\\"Enhanced\\\";\\n    if (tier === 3) return \\\"Institutional\\\";\\n    return \\\"\\\";\\n  }, [tier]);\\n\\n  const overallColor = scoreColor(trustScore);\\n\\n  const maskedKey = useMemo(() =\u003e \\\"anv_live_••••••••••••\\\" + \\\"k8f2\\\", []);\\n\\n  const radarScores = useMemo(() =\u003e {\\n    if (trustData?.components) {\\n      // Map trustData components to the 6 dimensions, scaling them to 0-100\\n      // Assuming max points for each component as per original code's scaling factors:\\n      // verification: 30, deals: 25, peerReviews: 20, compliance: 15, tenure: 10\\n      return [\\n        (trustData.components.verification / 30) * 100, // KYB Depth\\n        (trustData.components.deals / 25) * 100,       // Transaction History\\n        (trustData.components.compliance / 15) * 100,  // Dispute Outcomes (mapped to compliance)\\n        (trustData.components.peerReviews / 20) * 100, // Peer Attestations\\n        (trustData.components.tenure / 10) * 100,      // Platform Tenure\\n        (trustData.components.verification / 30) * 100, // Identity Verification (re-using verification score)\\n      ].map(score =\u003e Math.min(100, Math.max(0, score))); // Ensure scores are between 0 and 100\\n    }\\n    // Fallback to default scores from DIMENSIONS_CONFIG\\n    return DIMENSIONS_CONFIG.map(d =\u003e d.score);\\n  }, [trustData]);\\n\\n  const componentDisplayData = useMemo(() =\u003e {\\n    if (trustData?.components) {\\n      return [\\n        { key: \\\"kyb_depth\\\", label: \\\"KYB Depth\\\", score: (trustData.components.verification / 30) * 100, icon: ShieldCheck, status: \\\"Verified\\\" as const },\\n        { key: \\\"transaction_history\\\", label: \\\"Transaction History\\\", score: (trustData.components.deals / 25) * 100, icon: Award, status: \\\"Auto\\\" as const },\\n        { key: \\\"dispute_outcomes\\\", label: \\\"Dispute Outcomes\\\", score: (trustData.components.compliance / 15) * 100, icon: Info, status: \\\"Auto\\\" as const },\\n        { key: \\\"peer_attestations\\\", label: \\\"Peer Attestations\\\", score: (trustData.components.peerReviews / 20) * 100, icon: Users, status: \\\"Auto\\\" as const },\\n        { key: \\\"platform_tenure\\\", label: \\\"Platform Tenure\\\", score: (trustData.components.tenure / 10) * 100, icon: Clock, status: \\\"Auto\\\" as const },\\n        { key: \\\"identity_verification\\\", label: \\\"Identity Verification\\\", score: (trustData.components.verification / 30) * 100, icon: Fingerprint, status: \\\"Verified\\\" as const },\\n      ].map(item =\u003e ({ ...item, score: Math.min(100, Math.max(0, item.score)) })); // Ensure scores are between 0 and 100\\n    }\\n    return DIMENSIONS_CONFIG; // Fallback to default DIMENSIONS_CONFIG\\n  }, [trustData]);\\n\\n  useEffect(() =\u003e { document.title = \\\"Verification | ANAVI\\\"; }, []);\\n\\n  return (\\n    \u003cdiv className=\\\"p-8 space-y-8 animate-fade-in bg-slate-50 min-h-screen\\\"\u003e\\n      {upgradeOpen && \u003cUpgradeModal onClose={() =\u003e setUpgradeOpen(false)} /\u003e}\\n\\n      {/* ── Page Header ── */}\\n      \u003cFadeInView\u003e\\n      \u003cdiv className=\\\"flex items-center gap-4\\\"\u003e\\n        \u003cdiv className=\\\"w-11 h-11 rounded-xl flex items-center justify-center bg-slate-900/10\\\"\u003e\\n          \u003cShieldCheck className=\\\"w-6 h-6 text-slate-900\\\" /\u003e\\n        \u003c/div\u003e\\n        \u003cdiv\u003e\\n          \u003cdiv className=\\\"flex items-center gap-3\\\"\u003e\\n            \u003ch1 className=\\\"dash-heading text-3xl\\\"\u003e\\n              Verification &amp; Trust\\n            \u003c/h1\u003e\\n            \u003cBadge\\n              className=\\\"text-xs font-semibold px-3 py-1 border-0\\\"\\n              style={{ backgroundColor: tier \u003e= 2 ? `${C.gold}20` : `${C.steel}20`, color: tier \u003e= 2 ? C.gold : C.steel }}\\n            \u003e\\n              Tier {tier} ({tierName})\\n            \u003c/Badge\u003e\\n          \u003c/div\u003e\\n          \u003cp className=\\\"text-sm mt-1 text-slate-900/80\\\"\u003e\\n            Your trust profile across all verification dimensions\\n          \u003c/p\u003e\\n        \u003c/div\u003e\\n      \u003c/div\u003e\\n      \u003c/FadeInView\u003e\\n\\n      {/* ══════════════════════════════════════════════════════\\n          Trust Score Dashboard\\n         ══════════════════════════════════════════════════════ */}\\n\\n      {/* Score Overview Card */}\\n      \u003cdiv className=\\\"card-elevated p-6\\\"\u003e\\n        \u003cdiv className=\\\"grid grid-cols-1 lg:grid-cols-3 gap-8 items-center\\\"\u003e\\n          {/* Left — big number */}\\n          \u003cdiv className=\\\"flex flex-col items-center lg:items-start\\\"\u003e\\n            \u003cspan className=\\\"text-xs font-semibold uppercase tracking-widest mb-2 text-slate-900/60\\\"\u003e\\n              Trust Score\\n            \u003c/span\u003e\\n            \u003cspan className=\\\"font-data-hud text-4xl font-bold\\\" style={{ color: overallColor }}\u003e\\n              \u003cSmoothCounter value={trustScore} /\u003e\\n            \u003c/span\u003e\\n            \u003cspan className=\\\"text-sm mt-2 text-slate-900/60\\\"\u003e\\n              out of 100\\n            \u003c/span\u003e\\n          \u003c/div\u003e\\n\\n          {/* Center — radar (live component scores when available) */}\\n          \u003cSmoothReveal className=\\\"flex justify-center\\\"\u003e\\n            \u003cRadarChart\\n              scores={radarScores}\\n              size={240}\\n            /\u003e\\n          \u003c/SmoothReveal\u003e\\n\\n          {/* Right — mini line chart */}\\n          \u003cdiv className=\\\"flex flex-col items-center lg:items-end gap-2\\\"\u003e\\n            \u003cspan className=\\\"text-xs font-semibold uppercase tracking-widest text-slate-900/60\\\"\u003e\\n              6-Month Trend\\n            \u003c/span\u003e\\n            \u003cMiniLineChart data={SCORE_HISTORY} width={200} height={80} /\u003e\\n            \u003cdiv className=\\\"flex gap-3 mt-1\\\"\u003e\\n              {[\\\"Aug\\\", \\\"Sep\\\", \\\"Oct\\\", \\\"Nov\\\", \\\"Dec\\\", \\\"Jan\\\"].map((m) =\u003e (\\n                \u003cspan key={m} className=\\\"text-[10px]\\\" style={{ color: `${C.navy}50` }}\u003e\\n                  {m}\\n                \u003c/span\u003e\\n              ))}\\n            \u003c/div\u003e\\n          \u003c/div\u003e\\n        \u003c/div\u003e\\n\\n        {/* F3: Trust Score History */}\\n        \u003cTrustScoreHistorySection /\u003e\\n      \u003c/div\u003e\\n\\n      {/* Component Score Cards (live from getTrustScore when available) */}\\n      \u003cdiv className=\\\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\\\"\u003e\\n        {componentDisplayData.map((dim) =\u003e {\\n          const Icon = dim.icon;\\n          const scoreVal = Math.min(100, Math.round(dim.score));\\n          const borderColor = dimBorderColor(scoreVal);\\n          return (\\n            \u003cdiv\\n              key={dim.key}\\n              className=\\\"card-elevated overflow-hidden\\\"\\n            \u003e\\n              \u003cdiv className=\\\"flex h-full\\\"\u003e\\n                \u003cdiv className=\\\"w-1 flex-shrink-0\\\" style={{ backgroundColor: borderColor }} /\u003e\\n                \u003cdiv className=\\\"p-4 flex-1\\\"\u003e\\n                  \u003cdiv className=\\\"flex items-start justify-between mb-3\\\"\u003e\\n                    \u003cdiv className=\\\"flex items-center gap-2\\\"\u003e\\n                      \u003cIcon className=\\\"w-4 h-4\\\" style={{ color: borderColor }} /\u003e\\n                      \u003cspan className=\\\"text-sm font-semibold text-slate-900\\\"\u003e\\n                        {dim.label}\\n                      \u003c/span\u003e\\n                    \u003c/div\u003e\\n                    {statusPill(dim.status)}\\n                  \u003c/div\u003e\\n                  \u003cdiv className=\\\"flex items-end justify-between mb-3\\\"\u003e\\n                    \u003cspan className=\\\"font-mono text-2xl font-bold text-slate-900\\\"\u003e\\n                      \u003cmotion.span\\n                        key={scoreVal}\\n                        initial={{ opacity: 0, scale: 0.9 }}\\n                        animate={{ opacity: 1, scale: 1 }}\\n                        transition={{ duration: 0.3 }}\\n                      \u003e\\n                        {scoreVal}\\n                      \u003c/motion.span\u003e\\n                      \u003cspan className=\\\"text-sm font-normal\\\" style={{ color: `${C.navy}50` }}\u003e\\n                        /100\\n                      \u003c/span\u003e\\n                    \u003c/span\u003e\\n                    {dim.status !== \\\"Auto\\\" && scoreVal \u003c 100 && (\\n                      \u003cbutton\\n                        className=\\\"text-xs font-semibold flex items-center gap-1 cursor-pointer hover:underline\\\"\\n                        style={{ color: C.blue }}\\n                      \u003e\\n                        Improve \u003cChevronRight className=\\\"w-3 h-3\\\" /\u003e\\n                      \u003c/button\u003e\\n                    )}\\n                  \u003c/div\u003e\\n                  \u003cdiv className=\\\"h-1.5 flex-1 overflow-hidden rounded-full bg-[#0A1628]/6\\\"\u003e\\n                    \u003cmotion.div\\n                      className=\\\"h-full rounded-full\\\"\\n                      initial={{ width: 0 }}\\n                      animate={{ width: `${scoreVal}%` }}\\n                      transition={{ duration: 0.8, ease: \\\"easeOut\\\" }}\\n                      style={{\\n                        background: scoreVal \u003e 80 ? \\\"#059669\\\" : scoreVal \u003e 60 ? \\\"#C4972A\\\" : \\\"#2563EB\\\",\\n                      }}\\n                    /\u003e\\n                  \u003c/div\u003e\\n                \u003c/div\u003e\\n              \u003c/div\u003e\\n            \u003c/div\u003e\\n          );\\n        })}\\n      \u003c/div\u003e\\n\\n      {/* ══════════════════════════════════════════════════════\\n          Tier Status & Upgrade\\n         ══════════════════════════════════════════════════════ */}\\n\\n      {/* Current Tier Card */}\\n      \u003cdiv className=\\\"card-elevated p-6\\\"\u003e\\n        \u003cdiv className=\\\"flex items-center gap-6\\\"\u003e\\n          \u003cTierShieldBadge tier={tier} size={72} /\u003e\\n          \u003cdiv className=\\\"flex-1\\\"\u003e\\n            \u003ch3 className=\\\"text-lg font-bold text-slate-900\\\"\u003e\\n              Current Tier: Tier {tier} ({tierName})\\n            \u003c/h3\u003e\\n            \u003cp className=\\\"text-sm mt-1 text-slate-900/70\\\"\u003e\\n              {tier === 1 && \\\"Basic access — deals up to $1M, standard matching, basic counterparty visibility.\\\"}\\n              {tier === 2 && \\\"Enhanced access — deals up to $50M, priority matching, enhanced counterparty data.\\\"}\\n              {tier === 3 && \\\"Full institutional access — unlimited deal size, premium matching, all counterparties.\\\"}\\n            \u003c/p\u003e\\n          \u003c/div\u003e\\n          {tier \u003c 2 && (\\n            \u003cButton\\n              className=\\\"cursor-pointer font-semibold bg-[#C4972A] text-white h-12 px-6 hover:bg-[#B3882A]\\\"\\n              onClick={() =\u003e setUpgradeOpen(true)}\\n            \u003e\\n              Upgrade to Tier 2\\n            \u003c/Button\u003e\\n          )}\\n        \u003c/div\u003e\\n      \u003c/div\u003e\\n\\n      {/* Tier Comparison Table */}\\n      \u003cdiv className=\\\"card-elevated p-6 overflow-hidden\\\"\u003e\\n        \u003ch3 className=\\\"mb-4 data-label\\\"\u003eTier Comparison\u003c/h3\u003e\\n        \u003cdiv className=\\\"overflow-x-auto\\\"\u003e\\n            \u003ctable className=\\\"w-full text-sm\\\"\u003e\\n              \u003cthead\u003e\\n                \u003ctr className=\\\"bg-slate-900/[0.04]\\\"\u003e\\n                  \u003cth className=\\\"text-left px-6 py-3 font-semibold text-slate-900\\\"\u003e\\n                    Feature\\n                  \u003c/th\u003e\\n                  {[1, 2, 3].map((t) =\u003e (\\n                    \u003cth\\n                      key={t}\\n                      className={`px-6 py-3 font-semibold text-center ${tier === t ? \\\"border-l border-r border-[#C4972A]/25\\\" : \\\"\\\"}`}\\n                      style={{\\n                        color: C.navy,\\n                        borderBottom: tier === t ? `2px solid ${C.blue}` : undefined,\\n                      }}\\n                    \u003e\\n                      Tier {t}\\n                      {tier === t && (\\n                        \u003cspan className=\\\"ml-1.5 text-[10px] font-bold uppercase text-blue-600\\\"\u003e\\n                          Current\\n                        \u003c/span\u003e\\n                      )}\\n                    \u003c/th\u003e\\n                  ))}\\n                \u003c/tr\u003e\\n              \u003c/thead\u003e\\n              \u003ctbody\u003e\\n                {TIER_FEATURES.map((f, i) =\u003e (\\n                  \u003ctr key={i} className=\\\"border-t\\\" style={{ borderColor: C.border }}\u003e\\n                    \u003ctd className=\\\"px-6 py-3 font-medium\\\" style={{ color: C.steel }}\u003e\\n                      {f.label}\\n                    \u003c/td\u003e\\n                    {([f.t1, f.t2, f.t3] as const).map((val, ti) =\u003e (\\n                      \u003ctd\\n                        key={ti}\\n                        className={`px-6 py-3 text-center ${tier === ti + 1 ? \\\"border-l border-r border-[#C4972A]/25\\\" : \\\"\\\"}`}\\n                        style={{\\n                          color: tier === ti + 1 ? C.blue : `${C.navy}70`,\\n                          fontWeight: tier === ti + 1 ? 600 : 400,\\n                          backgroundColor: tier === ti + 1 ? `${C.blue}06` : undefined,\\n                        }}\\n                      \u003e\\n                        {val}\\n                      \u003c/td\u003e\\n                    ))}\\n                  \u003c/tr\u003e\\n                ))}\\n              \u003c/tbody\u003e\\n            \u003c/table\u003e\\n          \u003c/div\u003e\\n      \u003c/div\u003e\\n\\n      {/* ══════════════════════════════════════════════════════\\n          F1: Verification Documents (Upload + List)\\n         ══════════════════════════════════════════════════════ */}\\n\\n      \u003cVerificationDocumentsSection /\u003e\\n\\n      {/* ══════════════════════════════════════════════════════\\n          Compliance Passport\\n         ══════════════════════════════════════════════════════ */}\\n\\n      \u003cdiv className=\\\"grid grid-cols-1 lg:grid-cols-2 gap-6\\\"\u003e\\n        {/* E25: Passport Card with GlowingBorder */}\\n        \u003cGlowingBorder color={C.gold}\u003e\\n        \u003cdiv\\n          className=\\\"rounded-2xl overflow-hidden shadow-lg\\\"\\n          style={{ border: `1px solid ${C.border}` }}\\n        \u003e\\n          {/* Navy header */}\\n          \u003cdiv className=\\\"px-6 py-4 flex items-center justify-between bg-slate-900\\\"\u003e\\n            \u003cspan className=\\\"text-white font-bold text-sm tracking-widest uppercase\\\"\u003eANAVI\u003c/span\u003e\\n            \u003cspan className=\\\"text-white/50 text-xs\\\"\u003eCompliance Passport\u003c/span\u003e\\n          \u003c/div\u003e\\n\\n          \u003cdiv className=\\\"bg-white p-6 space-y-4\\\"\u003e\\n            \u003cdiv className=\\\"flex items-start justify-between\\\"\u003e\\n              \u003cdiv\u003e\\n                \u003cdiv className=\\\"text-xs uppercase tracking-wide mb-1\\\" style={{ color: `${C.navy}60` }}\u003e\\n                  Participant\\n                \u003c/div\u003e\\n                \u003cdiv className=\\\"font-bold text-lg text-slate-900\\\"\u003e\\n                  {user?.name ?? \\\"—\\\"}\\n                \u003c/div\u003e\\n                \u003cdiv className=\\\"text-xs mt-0.5\\\" style={{ color: `${C.navy}50` }}\u003e\\n                  ID: {user?.id != null ? String(user.id).slice(0, 8) : \\\"—\\\"}\\n                \u003c/div\u003e\\n              \u003c/div\u003e\\n              \u003cdiv className=\\\"flex flex-col items-end gap-2\\\"\u003e\\n                \u003cBadge\\n                  className=\\\"border-0 font-semibold\\\"\\n                  style={{ backgroundColor: tier \u003e= 2 ? `${C.gold}20` : `${C.steel}20`, color: tier \u003e= 2 ? C.gold : C.steel }}\\n                \u003e\\n                  Tier {tier}\\n                \u003c/Badge\u003e\\n                \u003cspan className=\\\"font-mono text-xl font-bold\\\" style={{ color: overallColor }}\u003e\\n                  {trustScore}\\n                \u003c/span\u003e\\n              \u003c/div\u003e\\n            \u003c/div\u003e\\n\\n            \u003cdiv className=\\\"flex gap-4\\\"\u003e\\n              {[\\n                { label: \\\"KYC\\\", ok: true },\\n                { label: \\\"AML\\\", ok: true },\\n                { label: \\\"Sanctions\\\", ok: true },\\n              ].map((c) =\u003e (\\n                \u003cdiv\\n                  key={c.label}\\n                  className=\\\"flex items-center gap-1.5 text-xs font-semibold\\\"\\n                  style={{ color: c.ok ? C.green : C.red }}\\n                \u003e\\n                  {c.ok ? \u003cCheck className=\\\"w-3.5 h-3.5\\\" /\u003e : \u003cX className=\\\"w-3.5 h-3.5\\\" /\u003e}\\n                  {c.label}\\n                \u003c/div\u003e\\n              ))}\\n            \u003c/div\u003e\\n\\n            \u003cdiv className=\\\"flex items-end justify-between pt-2 border-t\\\" style={{ borderColor: C.border }}\u003e\\n              \u003cdiv className=\\\"space-y-1\\\"\u003e\\n                \u003cdiv className=\\\"text-[10px] uppercase tracking-wide\\\" style={{ color: `${C.navy}50` }}\u003e\\n                  Issued\\n                \u003c/div\u003e\\n                \u003cdiv className=\\\"text-xs font-medium\\\" style={{ color: C.navy }}\u003e\\n                  {new Date().toLocaleDateString(\\\"en-US\\\", { month: \\\"short\\\", day: \\\"numeric\\\", year: \\\"numeric\\\" })}\\n                \u003c/div\u003e\\n                \u003cdiv className=\\\"text-[10px] uppercase tracking-wide mt-2\\\" style={{ color: `${C.navy}50` }}\u003e\\n                  Next Renewal\\n                \u003c/div\u003e\\n                \u003cdiv className=\\\"text-xs font-medium\\\" style={{ color: C.navy }}\u003e\\n                  {new Date(Date.now() + 365 * 86400000).toLocaleDateString(\\\"en-US\\\", { month: \\\"short\\\", day: \\\"numeric\\\", year: \\\"numeric\\\" })}\\n                \u003c/div\u003e\\n              \u003c/div\u003e\\n              \u003cdiv\\n                className=\\\"w-16 h-16 rounded-lg flex items-center justify-center\\\"\\n                style={{ backgroundColor: `${C.navy}08` }}\\n              \u003e\\n                \u003cQrCode className=\\\"w-8 h-8\\\" style={{ color: `${C.navy}30` }} /\u003e\\n              \u003c/div\u003e\\n            \u003c/div\u003e\\n          \u003c/div\u003e\\n        \u003c/div\u003e\\n        \u003c/GlowingBorder\u003e\\n\\n        {/* Share Controls */}\\n        \u003cdiv className=\\\"card-elevated p-6\\\"\u003e\\n          \u003ch3 className=\\\"mb-4 data-label\\\"\u003eShare & Access\u003c/h3\u003e\\n          \u003cdiv className=\\\"space-y-5\\\"\u003e\\n            \u003cdiv\u003e\\n              \u003clabel className=\\\"text-xs font-semibold uppercase tracking-wide mb-2 block\\\" style={{ color: `${C.navy}60` }}\u003e\\n                Shareable Verification Link\\n              \u003c/label\u003e\\n              {shareUrl ? (\\n                \u003cShareLinkRow url={shareUrl} /\u003e\\n              ) : (\\n                \u003cButton\\n                  className=\\\"w-full cursor-pointer\\\"\\n                  style={{ backgroundColor: C.blue, color: \\\"white\\\", height: 48 }}\\n                  onClick={() =\u003e setShareUrl(`https://anavi.io/verify/${user?.id != null ? String(user.id).slice(0, 8) : \\\"abc123\\\"}`)}\\n                \u003e\\n                  Generate Shareable Link\\n                \u003c/Button\u003e\\n              )}\\n            \u003c/div\u003e\\n\\n            \u003cdiv\u003e\\n              \u003clabel className=\\\"text-xs font-semibold uppercase tracking-wide mb-2 block\\\" style={{ color: `${C.navy}60` }}\u003e\\n                API Key\\n              \u003c/label\u003e\\n              \u003cdiv className=\\\"flex items-center gap-2\\\"\u003e\\n                \u003cinput\\n                  readOnly\\n                  value={maskedKey}\\n                  className=\\\"flex-1 rounded-lg text-sm font-mono px-4\\\"\\n                  style={{ height: 48, border: `1px solid ${C.border}`, color: C.navy }}\\n                /\u003e\\n                \u003cButton\\n                  variant=\\\"outline\\\"\\n                  className=\\\"cursor-pointer\\\"\\n                  style={{ height: 48, borderColor: C.border }}\\n                  onClick={() =\u003e {\\n                    navigator.clipboard.writeText(maskedKey);\\n                    toast.success(\\\"API key copied\\\");\\n                  }}\\n                \u003e\\n                  \u003cCopy className=\\\"w-4 h-4\\\" /\u003e\\n                \u003c/Button\u003e\\n              \u003c/div\u003e\\n            \u003c/div\u003e\\n\\n            \u003cdiv\\n              className=\\\"flex items-center gap-2 px-4 py-3 rounded-lg text-sm\\\"\\n              style={{ backgroundColor: `${C.green}08`, color: C.green }}\\n            \u003e\\n              \u003cLock className=\\\"w-4 h-4\\\" /\u003e\\n              \u003cspan className=\\\"font-medium\\\"\u003eAccepted by {PARTNER_COUNT} institutional partners\u003c/span\u003e\\n            \u003c/div\u003e\\n          \u003c/div\u003e\\n        \u003c/div\u003e\\n      \u003c/div\u003e\\n    \u003c/div\u003e\\n  );\\n}\\n\",\n  \"changes_summary\": [\n    \"Replaced the `DIMENSIONS` array with `DIMENSIONS_CONFIG` to align with whitepaper's six Trust Score components: 'KYB Depth', 'Transaction History', 'Dispute Outcomes', 'Peer Attestations', 'Platform Tenure', and 'Identity Verification'.\",\n    \"Updated `RadarChart` and individual component score cards to use `radarScores` and `componentDisplayData` derived from `trustData.components` (when available) or `DIMENSIONS_CONFIG` as a fallback, ensuring correct data mapping and display.\",\n    \"Added `Fingerprint` icon to `lucide-react` imports for 'Identity Verification' dimension.\",\n    \"Added a `PARTNER_COUNT` constant (set to 12) and replaced the hardcoded string '12 institutional partners' with a dynamic reference to this constant.\",\n    \"Added a `TODO` comment above the `SCORE_HISTORY` array, indicating it should be replaced with live data from `trpc.user.getTrustScoreHistory`.\",\n    \"Modified the main tier badge to display the whitepaper-aligned tier names ('Basic', 'Enhanced', 'Institutional') alongside the tier number (e.g., 'Tier 1 (Basic)').\"\n  ],\n  \"whitepaper_terms_added\": [\n    \"KYB Depth\",\n    \"Transaction History\",\n    \"Dispute Outcomes\",\n    \"Peer Attestations\",\n    \"Platform Tenure\",\n    \"Identity Verification\",\n    \"Basic (Tier)\",\n    \"Enhanced (Tier)\",\n    \"Institutional (Tier)\"\n  ],\n  \"copy_tokens_used\": []\n}\n```"
          }
        ],
        "role": "model"
      },
      "finishReason": "STOP",
      "index": 0
    }
  ],
  "usageMetadata": {
    "promptTokenCount": 15927,
    "candidatesTokenCount": 13354,
    "totalTokenCount": 37952,
    "promptTokensDetails": [
      {
        "modality": "TEXT",
        "tokenCount": 15927
      }
    ],
    "thoughtsTokenCount": 8671
  },
  "modelVersion": "gemini-2.5-flash",
  "responseId": "H-ihabDFKeDRz7IPko24iQc"
}
