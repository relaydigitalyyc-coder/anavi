{
  "upgraded_tsx": "import { useState, useCallback, useMemo, useEffect } from \"react\";\nimport { trpc } from \"@/lib/trpc\";\nimport { useAuth } from \"@/_core/hooks/useAuth\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport FVMCelebration from \"@/components/FVMCelebration\";\nimport { FadeInView, StaggerContainer, StaggerItem } from \"@/components/PageTransition\";\nimport { motion } from \"framer-motion\";\nimport { SmoothReveal, GlowingBorder, SmoothCounter } from \"@/components/PremiumAnimations\";\nimport {\n  Shield,\n  ShieldCheck,\n  TrendingUp,\n  Award,\n  Clock,\n  Users,\n  Star,\n  FileCheck,\n  Lock,\n  Copy,\n  QrCode,\n  ChevronRight,\n  Check,\n  Upload,\n  X,\n  Info,\n  Fingerprint, // Added Fingerprint icon\n} from \"lucide-react\";\nimport { toast } from \"sonner\";\n\n// \u2500\u2500\u2500 Design Tokens \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nconst C = {\n  navy: \"#0A1628\",\n  gold: \"#C4972A\",\n  blue: \"#2563EB\",\n  green: \"#059669\",\n  red: \"#DC2626\",\n  steel: \"#1E3A5F\",\n  surface: \"#F3F7FC\",\n  border: \"#D1DCF0\",\n} as const;\n\n// \u2500\u2500\u2500 Radar / Score Dimensions \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n// Whitepaper-aligned Trust Score components\nconst DIMENSIONS_CONFIG = [\n  { key: \"kyb_depth\", label: \"KYB Depth\", score: 90, icon: ShieldCheck, status: \"Verified\" },\n  { key: \"transaction_history\", label: \"Transaction History\", score: 80, icon: Award, status: \"Auto\" },\n  { key: \"dispute_outcomes\", label: \"Dispute Outcomes\", score: 70, icon: Info, status: \"Auto\" },\n  { key: \"peer_attestations\", label: \"Peer Attestations\", score: 85, icon: Users, status: \"Auto\" },\n  { key: \"platform_tenure\", label: \"Platform Tenure\", score: 60, icon: Clock, status: \"Auto\" },\n  { key: \"identity_verification\", label: \"Identity Verification\", score: 95, icon: Fingerprint, status: \"Verified\" },\n] as const;\n\nconst TIER_FEATURES = [\n  { label: \"Deal value access\", t1: \"Up to $1M\", t2: \"Up to $50M\", t3: \"Unlimited\" },\n  { label: \"Counterparty access\", t1: \"Basic only\", t2: \"Enhanced + Basic\", t3: \"All tiers\" },\n  { label: \"Match priority\", t1: \"Standard\", t2: \"Priority\", t3: \"Premium\" },\n  { label: \"Founding member\", t1: \"No\", t2: \"Eligible\", t3: \"Included\" },\n];\n\nconst AML_QUESTIONS = [\n  \"Are all funds derived from legitimate business activities?\",\n  \"Are you or any beneficial owner a Politically Exposed Person (PEP)?\",\n  \"Have you or your organization been subject to any sanctions or enforcement actions?\",\n  \"Can you provide documentation for the source of funds used in transactions?\",\n];\n\n// TODO: replace with live trpc.user.getTrustScoreHistory data\nconst SCORE_HISTORY = [65, 68, 72, 74, 78, 84];\n\nconst DOC_TYPES = [\n  \"government_id\",\n  \"passport\",\n  \"business_license\",\n  \"incorporation_docs\",\n  \"proof_of_address\",\n  \"bank_statement\",\n  \"tax_document\",\n  \"accreditation_letter\",\n] as const;\n\n// \u2500\u2500\u2500 Constants \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nconst PARTNER_COUNT = 12; // TODO: source from live data\n\nfunction VerificationDocumentsSection() {\n  const utils = trpc.useUtils();\n  const { data: docs = [] } = trpc.user.getVerificationDocuments.useQuery();\n  const requestUpload = trpc.verification.requestUpload.useMutation();\n  const confirmUpload = trpc.verification.confirmUpload.useMutation({\n    onSuccess: () => {\n      utils.user.getVerificationDocuments.invalidate();\n      utils.user.getTrustScore.invalidate();\n      toast.success(\"Document submitted for review\");\n    },\n    onError: (e) => toast.error(e.message),\n  });\n\n  const [docType, setDocType] = useState<typeof DOC_TYPES[number]>(\"government_id\");\n  const [file, setFile] = useState<File | null>(null);\n  const [uploading, setUploading] = useState(false);\n\n  const handleUpload = useCallback(async () => {\n    if (!file) return;\n    setUploading(true);\n    try {\n      const { key } = await requestUpload.mutateAsync({\n        documentType: docType,\n        mimeType: file.type || \"application/octet-stream\",\n      });\n      await confirmUpload.mutateAsync({ fileKey: key, documentType: docType });\n      setFile(null);\n    } catch (e) {\n      toast.error(e instanceof Error ? e.message : \"Upload failed\");\n    } finally {\n      setUploading(false);\n    }\n  }, [file, docType, requestUpload, confirmUpload]);\n\n  const statusBadge = (status: string) => {\n    const cls =\n      status === \"approved\"\n        ? \"bg-[#059669]/15 text-[#059669]\"\n        : status === \"rejected\"\n          ? \"bg-red-500/15 text-red-600\"\n          : \"bg-[#F59E0B]/15 text-[#F59E0B]\";\n    return (\n      <span className={`rounded-full px-2 py-0.5 text-[10px] font-bold uppercase tracking-wider ${cls}`}>\n        {status}\n      </span>\n    );\n  };\n\n  return (\n    <div className=\"card-elevated p-6\">\n      <h3 className=\"mb-4 data-label\">Verification Documents</h3>\n      <p className=\"text-sm mb-6\" style={{ color: `${C.navy}70` }}>\n        Upload your first verification document. Accepted: gov ID, business license, proof of address.\n      </p>\n\n      {docs.length > 0 && (\n        <div className=\"mb-6 space-y-3\">\n          {docs.map((d: any) => (\n            <div\n              key={d.id}\n              className=\"flex items-center justify-between p-3 rounded-lg\"\n              style={{ backgroundColor: `${C.navy}06`, borderColor: C.border, borderWidth: 1 }}\n            >\n              <div className=\"flex items-center gap-3\">\n                <FileCheck className=\"w-5 h-5\" style={{ color: C.blue }} />\n                <div>\n                  <p className=\"text-sm font-medium\" style={{ color: C.navy }}>\n                    {String(d.documentType).replace(/_/g, \" \")}\n                  </p>\n                  <p className=\"text-xs\" style={{ color: `${C.navy}60` }}>\n                    {new Date(d.createdAt).toLocaleDateString()}\n                  </p>\n                </div>\n              </div>\n              {statusBadge(d.status ?? \"pending\")}\n            </div>\n          ))}\n        </div>\n      )}\n\n      <div\n        className=\"rounded-xl border-2 border-dashed p-6 transition-colors flex flex-col items-center justify-center gap-3 cursor-pointer\"\n        style={{\n          borderColor: file ? C.green : C.border,\n          backgroundColor: file ? `${C.green}08` : \"white\",\n        }}\n        onDragOver={(e) => e.preventDefault()}\n        onDrop={(e) => {\n          e.preventDefault();\n          const f = e.dataTransfer.files[0];\n          if (f && /\\.(pdf|jpg|jpeg|png)$/i.test(f.name)) setFile(f);\n        }}\n        onClick={() => {\n          const input = document.createElement(\"input\");\n          input.type = \"file\";\n          input.accept = \".pdf,.jpg,.jpeg,.png\";\n          input.onchange = (ev) => {\n            const f = (ev.target as HTMLInputElement).files?.[0];\n            if (f) setFile(f);\n          };\n          input.click();\n        }}\n      >\n        <select\n          value={docType}\n          onChange={(e) => setDocType(e.target.value as typeof DOC_TYPES[number])}\n          className=\"rounded-lg px-3 py-2 text-sm border mb-2\"\n          style={{ borderColor: C.border }}\n          onClick={(e) => e.stopPropagation()}\n        >\n          {DOC_TYPES.map((t) => (\n            <option key={t} value={t}>\n              {t.replace(/_/g, \" \")}\n            </option>\n          ))}\n        </select>\n        {file ? (\n          <div className=\"flex flex-col items-center gap-2\">\n            <div className=\"flex items-center gap-2 text-sm\" style={{ color: C.green }}>\n              <Check className=\"w-4 h-4\" />\n              {file.name}\n            </div>\n            <Button\n              size=\"sm\"\n              className=\"cursor-pointer\"\n              style={{ backgroundColor: C.gold, color: \"white\" }}\n              onClick={(e) => {\n                e.stopPropagation();\n                handleUpload();\n              }}\n              disabled={uploading}\n            >\n              {uploading ? \"Uploading\u2026\" : \"Submit for Review\"}\n            </Button>\n          </div>\n        ) : (\n          <>\n            <Upload className=\"w-8 h-8\" style={{ color: C.steel }} />\n            <span className=\"text-sm font-medium\" style={{ color: C.steel }}>\n              Drag & drop or click to upload\n            </span>\n            <span className=\"text-xs\" style={{ color: `${C.navy}80` }}>\n              PDF, JPG, or PNG \u2014 max 10MB\n            </span>\n          </>\n        )}\n      </div>\n    </div>\n  );\n}\n\nfunction TrustScoreHistorySection() {\n  const [expanded, setExpanded] = useState(false);\n  const { data: history, isLoading } = trpc.user.getTrustScoreHistory.useQuery({ limit: 10 }, { enabled: expanded });\n  const hasHistory = (history?.length ?? 0) > 0;\n  return (\n    <div className=\"mt-6 pt-6 border-t\" style={{ borderColor: C.border }}>\n      <button\n        onClick={() => setExpanded(!expanded)}\n        className=\"flex items-center gap-2 text-sm font-medium w-full cursor-pointer hover:opacity-80\"\n        style={{ color: C.steel }}\n      >\n        <ChevronRight className={`w-4 h-4 transition-transform ${expanded ? \"rotate-90\" : \"\"}`} />\n        Trust Score History\n      </button>\n      {expanded && (\n        <div className=\"mt-3 space-y-2\">\n          {isLoading && <p className=\"text-sm\" style={{ color: `${C.navy}60` }}>Loading\u2026</p>}\n          {!isLoading && !hasHistory && (\n            <p className=\"text-sm\" style={{ color: `${C.navy}60` }}>\n              Your Trust Score will update as you complete deals and receive reviews.\n            </p>\n          )}\n          {!isLoading && hasHistory &&\n            history!.map((h) => {\n              const prev = Number(h.previousScore ?? 0);\n              const next = Number(h.newScore ?? 0);\n              const delta = next - prev;\n              return (\n                <div key={h.id} className=\"flex items-center justify-between text-sm py-2 px-3 rounded-lg\" style={{ backgroundColor: `${C.navy}06` }}>\n                  <span style={{ color: C.navy }}>{h.changeReason}</span>\n                  <span className={delta >= 0 ? \"font-semibold\" : \"\"} style={{ color: delta >= 0 ? C.green : C.red }}>\n                    {delta >= 0 ? `+${delta}` : delta}\n                  </span>\n                </div>\n              );\n            })}\n        </div>\n      )}\n    </div>\n  );\n}\n\n// \u2500\u2500\u2500 SVG Helpers \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nfunction polarToCartesian(cx: number, cy: number, r: number, angleDeg: number) {\n  const rad = ((angleDeg - 90) * Math.PI) / 180;\n  return { x: cx + r * Math.cos(rad), y: cy + r * Math.sin(rad) };\n}\n\nfunction hexPoints(cx: number, cy: number, r: number): string {\n  return Array.from({ length: 6 })\n    .map((_, i) => {\n      const p = polarToCartesian(cx, cy, r, i * 60);\n      return `${p.x},${p.y}`;\n    })\n    .join(\" \");\n}\n\nfunction RadarChart({ scores, size = 240 }: { scores: number[]; size?: number }) {\n  const cx = size / 2;\n  const cy = size / 2;\n  const maxR = size / 2 - 20;\n  const levels = [0.2, 0.4, 0.6, 0.8, 1.0];\n\n  const dataPoints = scores.map((s, i) => {\n    const r = (s / 100) * maxR;\n    return polarToCartesian(cx, cy, r, i * 60);\n  });\n  const dataPolygon = dataPoints.map((p) => `${p.x},${p.y}`).join(\" \");\n\n  return (\n    <svg width={size} height={size} viewBox={`0 0 ${size} ${size}`}>\n      {levels.map((l) => (\n        <polygon\n          key={l}\n          points={hexPoints(cx, cy, maxR * l)}\n          fill=\"none\"\n          stroke={C.navy}\n          strokeWidth={0.5}\n          opacity={0.2}\n        />\n      ))}\n      {Array.from({ length: 6 }).map((_, i) => {\n        const p = polarToCartesian(cx, cy, maxR, i * 60);\n        return <line key={i} x1={cx} y1={cy} x2={p.x} y2={p.y} stroke={C.navy} strokeWidth={0.5} opacity={0.15} />;\n      })}\n      <polygon points={dataPolygon} fill={C.blue} fillOpacity={0.3} stroke={C.blue} strokeWidth={2} />\n      {dataPoints.map((p, i) => (\n        <circle key={i} cx={p.x} cy={p.y} r={3} fill={C.blue} />\n      ))}\n      {DIMENSIONS_CONFIG.map((d, i) => { // Use DIMENSIONS_CONFIG for labels\n        const p = polarToCartesian(cx, cy, maxR + 14, i * 60);\n        return (\n          <text\n            key={d.key}\n            x={p.x}\n            y={p.y}\n            textAnchor=\"middle\"\n            dominantBaseline=\"middle\"\n            fontSize={8}\n            fill={C.navy}\n            fontWeight={600}\n          >\n            {Math.round(scores[i])}% {/* Display the actual score from the `scores` prop */}\n          </text>\n        );\n      })}\n    </svg>\n  );\n}\n\nfunction MiniLineChart({ data, width = 200, height = 80 }: { data: number[]; width?: number; height?: number }) {\n  const pad = 8;\n  const min = Math.min(...data) - 5;\n  const max = Math.max(...data) + 5;\n  const xStep = (width - pad * 2) / (data.length - 1);\n\n  const points = data.map((v, i) => ({\n    x: pad + i * xStep,\n    y: pad + ((max - v) / (max - min)) * (height - pad * 2),\n  }));\n\n  const polyline = points.map((p) => `${p.x},${p.y}`).join(\" \");\n  const areaPath = `M${points[0].x},${height} ${points.map((p) => `L${p.x},${p.y}`).join(\" \")} L${points[points.length - 1].x},${height} Z`;\n\n  return (\n    <svg width={width} height={height} viewBox={`0 0 ${width} ${height}`}>\n      <path d={areaPath} fill={C.blue} fillOpacity={0.1} />\n      <polyline points={polyline} fill=\"none\" stroke={C.navy} strokeWidth={2} strokeLinejoin=\"round\" />\n      {points.map((p, i) => (\n        <circle key={i} cx={p.x} cy={p.y} r={2.5} fill={C.navy} />\n      ))}\n    </svg>\n  );\n}\n\nfunction ShareLinkRow({ url }: { url: string }) {\n  const [copied, setCopied] = useState(false);\n\n  const handleCopy = () => {\n    navigator.clipboard.writeText(url);\n    setCopied(true);\n    toast.success(\"Link copied!\");\n    setTimeout(() => setCopied(false), 2000);\n  };\n\n  return (\n    <div className=\"flex items-center gap-2\">\n      <input\n        readOnly\n        value={url}\n        className=\"flex-1 rounded-lg text-sm font-mono px-4\"\n        style={{ height: 48, border: `1px solid ${C.border}`, color: C.navy }}\n      />\n      <Button\n        variant=\"outline\"\n        className=\"cursor-pointer\"\n        style={{ height: 48, borderColor: C.border, transition: \"all 0.3s\" }}\n        onClick={handleCopy}\n      >\n        {copied ? (\n          <Check className=\"w-4 h-4 text-green-600 transition-transform scale-110\" />\n        ) : (\n          <Copy className=\"w-4 h-4\" />\n        )}\n      </Button>\n    </div>\n  );\n}\n\n// \u2500\u2500\u2500 Drag-Drop Zone \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nfunction DropZone({\n  label,\n  file,\n  onFile,\n}: {\n  label: string;\n  file: File | null;\n  onFile: (f: File) => void;\n}) {\n  const [dragging, setDragging] = useState(false);\n\n  return (\n    <div\n      className=\"relative rounded-xl border-2 border-dashed transition-colors flex flex-col items-center justify-center gap-2 cursor-pointer\"\n      style={{\n        borderColor: dragging ? C.blue : C.border,\n        backgroundColor: dragging ? `${C.blue}08` : \"white\",\n        height: 120,\n      }}\n      onDragOver={(e) => {\n        e.preventDefault();\n        setDragging(true);\n      }}\n      onDragLeave={() => setDragging(false)}\n      onDrop={(e) => {\n        e.preventDefault();\n        setDragging(false);\n        if (e.dataTransfer.files[0]) onFile(e.dataTransfer.files[0]);\n      }}\n      onClick={() => {\n        const input = document.createElement(\"input\");\n        input.type = \"file\";\n        input.accept = \".pdf,.jpg,.png\";\n        input.onchange = (ev) => {\n          const f = (ev.target as HTMLInputElement).files?.[0];\n          if (f) onFile(f);\n        };\n        input.click();\n      }}\n    >\n      {file ? (\n        <div className=\"flex items-center gap-2 text-sm\" style={{ color: C.green }}>\n          <Check className=\"w-4 h-4\" />\n          {file.name}\n        </div>\n      ) : (\n        <>\n          <Upload className=\"w-5 h-5\" style={{ color: C.steel }} />\n          <span className=\"text-sm font-medium\" style={{ color: C.steel }}>\n            {label}\n          </span>\n          <span className=\"text-xs\" style={{ color: `${C.navy}80` }}>\n            PDF, JPG, or PNG \u2014 drag & drop or click\n          </span>\n        </>\n      )}\n    </div>\n  );\n}\n\n// \u2500\u2500\u2500 Upgrade Modal \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nfunction UpgradeModal({ onClose }: { onClose: () => void }) {\n  const [step, setStep] = useState(0);\n  const [bizDoc, setBizDoc] = useState<File | null>(null);\n  const [govId, setGovId] = useState<File | null>(null);\n  const [answers, setAnswers] = useState<(boolean | null)[]>([null, null, null, null]);\n  const [showCelebration, setShowCelebration] = useState(false);\n\n  const allAnswered = answers.every((a) => a !== null);\n\n  const handleSubmit = useCallback(() => {\n    setStep(3);\n    setTimeout(() => setShowCelebration(true), 3000);\n  }, []);\n\n  if (showCelebration) {\n    return (\n      <FVMCelebration\n        title=\"Tier 2 Verified!\"\n        subtitle=\"You now have access to deals up to $50M and enhanced counterparty matching.\"\n        ctaLabel=\"Continue to Dashboard\"\n        onCta={onClose}\n        icon={<ShieldCheck className=\"h-8 w-8\" style={{ color: C.green }} />}\n      />\n    );\n  }\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center\">\n      <div className=\"absolute inset-0 bg-[#0A1628]/60 backdrop-blur-sm\" onClick={onClose} />\n      <div className=\"relative z-10 mx-4 w-full max-w-lg rounded-2xl bg-white shadow-2xl animate-fade-in overflow-hidden\">\n        <div className=\"flex items-center justify-between px-6 py-4 bg-slate-900\">\n          <h3 className=\"text-white font-bold text-lg\">Upgrade to Tier 2</h3>\n          <button onClick={onClose} className=\"text-white/60 hover:text-white transition-colors cursor-pointer\">\n            <X className=\"w-5 h-5\" />\n          </button>\n        </div>\n\n        <div className=\"flex gap-1 px-6 pt-4\">\n          {[0, 1, 2, 3].map((s) => (\n            <div\n              key={s}\n              className={`h-1 flex-1 rounded-full transition-colors ${step >= s ? \"bg-blue-600\" : \"bg-slate-200\"}`}\n            />\n          ))}\n        </div>\n\n        <div className=\"p-6\">\n          {step === 0 && (\n            <div className=\"space-y-4\">\n              <h4 className=\"font-bold text-lg text-slate-900\">\n                What Tier 2 Unlocks\n              </h4>\n              <ul className=\"space-y-3\">\n                {[\n                  \"Deal access up to $50M (from $1M)\",\n                  \"Enhanced + Basic counterparty matching\",\n                  \"Priority match queue placement\",\n                  \"Founding member eligibility\",\n                ].map((item) => (\n                  <li key={item} className=\"flex items-start gap-3 text-sm\" style={{ color: C.steel }}>\n                    <Check className=\"w-4 h-4 mt-0.5 flex-shrink-0\" style={{ color: C.green }} />\n                    {item}\n                  </li>\n                ))}\n              </ul>\n              <Button\n                className=\"w-full cursor-pointer\"\n                style={{ backgroundColor: C.gold, color: \"white\", height: 48 }}\n                onClick={() => setStep(1)}\n              >\n                Continue <ChevronRight className=\"w-4 h-4 ml-1\" />\n              </Button>\n            </div>\n          )}\n\n          {step === 1 && (\n            <div className=\"space-y-4\">\n              <h4 className=\"font-bold text-lg text-slate-900\">\n                Document Upload\n              </h4>\n              <DropZone label=\"Business Registration\" file={bizDoc} onFile={setBizDoc} />\n              <DropZone label=\"Government-Issued ID\" file={govId} onFile={setGovId} />\n              <Button\n                className=\"w-full cursor-pointer\"\n                style={{ backgroundColor: C.blue, color: \"white\", height: 48 }}\n                disabled={!bizDoc || !govId}\n                onClick={() => setStep(2)}\n              >\n                Continue <ChevronRight className=\"w-4 h-4 ml-1\" />\n              </Button>\n            </div>\n          )}\n\n          {step === 2 && (\n            <div className=\"space-y-4\">\n              <h4 className=\"font-bold text-lg text-slate-900\">\n                AML Questionnaire\n              </h4>\n              {AML_QUESTIONS.map((q, i) => (\n                <div key={i} className=\"space-y-2\">\n                  <p className=\"text-sm font-medium\" style={{ color: C.steel }}>\n                    {i + 1}. {q}\n                  </p>\n                  <div className=\"flex gap-3\">\n                    {([\"Yes\", \"No\"] as const).map((opt) => {\n                      const selected = answers[i] === (opt === \"Yes\");\n                      return (\n                        <button\n                          key={opt}\n                          className=\"px-4 rounded-lg text-sm font-medium transition-colors cursor-pointer\"\n                          style={{\n                            height: 48,\n                            border: `1.5px solid ${selected ? C.blue : C.border}`,\n                            backgroundColor: selected ? `${C.blue}10` : \"white\",\n                            color: selected ? C.blue : C.steel,\n                          }}\n                          onClick={() => {\n                            const next = [...answers];\n                            next[i] = opt === \"Yes\";\n                            setAnswers(next);\n                          }}\n                        >\n                          {opt}\n                        </button>\n                      );\n                    })}\n                  </div>\n                </div>\n              ))}\n              <Button\n                className=\"w-full cursor-pointer\"\n                style={{ backgroundColor: C.blue, color: \"white\", height: 48 }}\n                disabled={!allAnswered}\n                onClick={handleSubmit}\n              >\n                Submit for Review\n              </Button>\n            </div>\n          )}\n\n          {step === 3 && (\n            <div className=\"flex flex-col items-center text-center py-8 space-y-4\">\n              <div className=\"relative w-16 h-16\">\n                <div\n                  className=\"absolute inset-0 rounded-full animate-spin\"\n                  style={\n                    {\n                      border: `3px solid ${C.border}`,\n                      borderTopColor: C.blue,\n                    }\n                  }\n                />\n              </div>\n              <h4 className=\"font-bold text-lg text-slate-900\">\n                Under Review\n              </h4>\n              <p className=\"text-sm\" style={{ color: C.steel }}>\n                Your application is being reviewed \u2014 typically under 24 hours.\n              </p>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// \u2500\u2500\u2500 Score Color \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nfunction scoreColor(score: number) {\n  if (score >= 80) return C.green;\n  if (score >= 60) return C.gold;\n  return C.red;\n}\n\nfunction statusPill(status: string) {\n  const cls: Record<string, string> = {\n    Verified: \"bg-[#059669]/15 text-[#059669] rounded-full px-2 py-0.5 text-[10px] font-bold uppercase tracking-wider\",\n    Pending:  \"bg-[#F59E0B]/15 text-[#F59E0B] rounded-full px-2 py-0.5 text-[10px] font-bold uppercase tracking-wider\",\n    Auto:     \"bg-[#2563EB]/10 text-[#2563EB] rounded-full px-2 py-0.5 text-[10px] font-bold uppercase tracking-wider\",\n  };\n  return (\n    <span className={cls[status] ?? cls.Auto}>\n      {status}\n    </span>\n  );\n}\n\n// \u2500\u2500\u2500 Dimension Border Color \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nfunction dimBorderColor(score: number) {\n  if (score >= 80) return C.green;\n  if (score >= 60) return C.blue;\n  return C.gold;\n}\n\n// \u2500\u2500\u2500 Shield Badge SVG \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nfunction TierShieldBadge({ tier, size = 64 }: { tier: number; size?: number }) {\n  return (\n    <svg width={size} height={size} viewBox=\"0 0 64 64\">\n      <path\n        d=\"M32 4 L56 16 V36 C56 50 32 60 32 60 C32 60 8 50 8 36 V16 Z\"\n        fill={tier >= 2 ? C.gold : C.steel}\n        opacity={0.15}\n        stroke={tier >= 2 ? C.gold : C.steel}\n        strokeWidth={2}\n      />\n      <text x=\"32\" y=\"38\" textAnchor=\"middle\" fontSize=\"22\" fontWeight=\"bold\" fill={tier >= 2 ? C.gold : C.steel}>\n        {tier}\n      </text>\n    </svg>\n  );\n}\n\n// \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n// Main Component\n// \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\nexport default function Verification() {\n  const { user } = useAuth();\n  const { data: docs } = trpc.user.getVerificationDocuments.useQuery();\n  const { data: reviews } = trpc.user.getPeerReviews.useQuery();\n  const { data: trustData } = trpc.user.getTrustScore.useQuery();\n  const [upgradeOpen, setUpgradeOpen] = useState(false);\n  const [shareUrl, setShareUrl] = useState<string | null>(null);\n\n  const tierRaw = (user as any)?.verificationTier ?? \"none\";\n  const tier = tierRaw === \"institutional\" ? 3 : tierRaw === \"enhanced\" ? 2 : tierRaw === \"basic\" ? 1 : 1;\n  const trustScore = (trustData?.total ?? Number((user as any)?.trustScore ?? 0)) || 0;\n\n  const tierName = useMemo(() => {\n    if (tier === 1) return \"Basic\";\n    if (tier === 2) return \"Enhanced\";\n    if (tier === 3) return \"Institutional\";\n    return \"\";\n  }, [tier]);\n\n  const overallColor = scoreColor(trustScore);\n\n  const maskedKey = useMemo(() => \"anv_live_\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\" + \"k8f2\", []);\n\n  const radarScores = useMemo(() => {\n    if (trustData?.components) {\n      // Map trustData components to the 6 dimensions, scaling them to 0-100\n      // Assuming max points for each component as per original code's scaling factors:\n      // verification: 30, deals: 25, peerReviews: 20, compliance: 15, tenure: 10\n      return [\n        (trustData.components.verification / 30) * 100, // KYB Depth\n        (trustData.components.deals / 25) * 100,       // Transaction History\n        (trustData.components.compliance / 15) * 100,  // Dispute Outcomes (mapped to compliance)\n        (trustData.components.peerReviews / 20) * 100, // Peer Attestations\n        (trustData.components.tenure / 10) * 100,      // Platform Tenure\n        (trustData.components.verification / 30) * 100, // Identity Verification (re-using verification score)\n      ].map(score => Math.min(100, Math.max(0, score))); // Ensure scores are between 0 and 100\n    }\n    // Fallback to default scores from DIMENSIONS_CONFIG\n    return DIMENSIONS_CONFIG.map(d => d.score);\n  }, [trustData]);\n\n  const componentDisplayData = useMemo(() => {\n    if (trustData?.components) {\n      return [\n        { key: \"kyb_depth\", label: \"KYB Depth\", score: (trustData.components.verification / 30) * 100, icon: ShieldCheck, status: \"Verified\" as const },\n        { key: \"transaction_history\", label: \"Transaction History\", score: (trustData.components.deals / 25) * 100, icon: Award, status: \"Auto\" as const },\n        { key: \"dispute_outcomes\", label: \"Dispute Outcomes\", score: (trustData.components.compliance / 15) * 100, icon: Info, status: \"Auto\" as const },\n        { key: \"peer_attestations\", label: \"Peer Attestations\", score: (trustData.components.peerReviews / 20) * 100, icon: Users, status: \"Auto\" as const },\n        { key: \"platform_tenure\", label: \"Platform Tenure\", score: (trustData.components.tenure / 10) * 100, icon: Clock, status: \"Auto\" as const },\n        { key: \"identity_verification\", label: \"Identity Verification\", score: (trustData.components.verification / 30) * 100, icon: Fingerprint, status: \"Verified\" as const },\n      ].map(item => ({ ...item, score: Math.min(100, Math.max(0, item.score)) })); // Ensure scores are between 0 and 100\n    }\n    return DIMENSIONS_CONFIG; // Fallback to default DIMENSIONS_CONFIG\n  }, [trustData]);\n\n  useEffect(() => { document.title = \"Verification | ANAVI\"; }, []);\n\n  return (\n    <div className=\"p-8 space-y-8 animate-fade-in bg-slate-50 min-h-screen\">\n      {upgradeOpen && <UpgradeModal onClose={() => setUpgradeOpen(false)} />}\n\n      {/* \u2500\u2500 Page Header \u2500\u2500 */}\n      <FadeInView>\n      <div className=\"flex items-center gap-4\">\n        <div className=\"w-11 h-11 rounded-xl flex items-center justify-center bg-slate-900/10\">\n          <ShieldCheck className=\"w-6 h-6 text-slate-900\" />\n        </div>\n        <div>\n          <div className=\"flex items-center gap-3\">\n            <h1 className=\"dash-heading text-3xl\">\n              Verification &amp; Trust\n            </h1>\n            <Badge\n              className=\"text-xs font-semibold px-3 py-1 border-0\"\n              style={{ backgroundColor: tier >= 2 ? `${C.gold}20` : `${C.steel}20`, color: tier >= 2 ? C.gold : C.steel }}\n            >\n              Tier {tier} ({tierName})\n            </Badge>\n          </div>\n          <p className=\"text-sm mt-1 text-slate-900/80\">\n            Your trust profile across all verification dimensions\n          </p>\n        </div>\n      </div>\n      </FadeInView>\n\n      {/* \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n          Trust Score Dashboard\n         \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550 */}\n\n      {/* Score Overview Card */}\n      <div className=\"card-elevated p-6\">\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8 items-center\">\n          {/* Left \u2014 big number */}\n          <div className=\"flex flex-col items-center lg:items-start\">\n            <span className=\"text-xs font-semibold uppercase tracking-widest mb-2 text-slate-900/60\">\n              Trust Score\n            </span>\n            <span className=\"font-data-hud text-4xl font-bold\" style={{ color: overallColor }}>\n              <SmoothCounter value={trustScore} />\n            </span>\n            <span className=\"text-sm mt-2 text-slate-900/60\">\n              out of 100\n            </span>\n          </div>\n\n          {/* Center \u2014 radar (live component scores when available) */}\n          <SmoothReveal className=\"flex justify-center\">\n            <RadarChart\n              scores={radarScores}\n              size={240}\n            />\n          </SmoothReveal>\n\n          {/* Right \u2014 mini line chart */}\n          <div className=\"flex flex-col items-center lg:items-end gap-2\">\n            <span className=\"text-xs font-semibold uppercase tracking-widest text-slate-900/60\">\n              6-Month Trend\n            </span>\n            <MiniLineChart data={SCORE_HISTORY} width={200} height={80} />\n            <div className=\"flex gap-3 mt-1\">\n              {[\"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\", \"Jan\"].map((m) => (\n                <span key={m} className=\"text-[10px]\" style={{ color: `${C.navy}50` }}>\n                  {m}\n                </span>\n              ))}\n            </div>\n          </div>\n        </div>\n\n        {/* F3: Trust Score History */}\n        <TrustScoreHistorySection />\n      </div>\n\n      {/* Component Score Cards (live from getTrustScore when available) */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n        {componentDisplayData.map((dim) => {\n          const Icon = dim.icon;\n          const scoreVal = Math.min(100, Math.round(dim.score));\n          const borderColor = dimBorderColor(scoreVal);\n          return (\n            <div\n              key={dim.key}\n              className=\"card-elevated overflow-hidden\"\n            >\n              <div className=\"flex h-full\">\n                <div className=\"w-1 flex-shrink-0\" style={{ backgroundColor: borderColor }} />\n                <div className=\"p-4 flex-1\">\n                  <div className=\"flex items-start justify-between mb-3\">\n                    <div className=\"flex items-center gap-2\">\n                      <Icon className=\"w-4 h-4\" style={{ color: borderColor }} />\n                      <span className=\"text-sm font-semibold text-slate-900\">\n                        {dim.label}\n                      </span>\n                    </div>\n                    {statusPill(dim.status)}\n                  </div>\n                  <div className=\"flex items-end justify-between mb-3\">\n                    <span className=\"font-mono text-2xl font-bold text-slate-900\">\n                      <motion.span\n                        key={scoreVal}\n                        initial={{ opacity: 0, scale: 0.9 }}\n                        animate={{ opacity: 1, scale: 1 }}\n                        transition={{ duration: 0.3 }}\n                      >\n                        {scoreVal}\n                      </motion.span>\n                      <span className=\"text-sm font-normal\" style={{ color: `${C.navy}50` }}>\n                        /100\n                      </span>\n                    </span>\n                    {dim.status !== \"Auto\" && scoreVal < 100 && (\n                      <button\n                        className=\"text-xs font-semibold flex items-center gap-1 cursor-pointer hover:underline\"\n                        style={{ color: C.blue }}\n                      >\n                        Improve <ChevronRight className=\"w-3 h-3\" />\n                      </button>\n                    )}\n                  </div>\n                  <div className=\"h-1.5 flex-1 overflow-hidden rounded-full bg-[#0A1628]/6\">\n                    <motion.div\n                      className=\"h-full rounded-full\"\n                      initial={{ width: 0 }}\n                      animate={{ width: `${scoreVal}%` }}\n                      transition={{ duration: 0.8, ease: \"easeOut\" }}\n                      style={{\n                        background: scoreVal > 80 ? \"#059669\" : scoreVal > 60 ? \"#C4972A\" : \"#2563EB\",\n                      }}\n                    />\n                  </div>\n                </div>\n              </div>\n            </div>\n          );\n        })}\n      </div>\n\n      {/* \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n          Tier Status & Upgrade\n         \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550 */}\n\n      {/* Current Tier Card */}\n      <div className=\"card-elevated p-6\">\n        <div className=\"flex items-center gap-6\">\n          <TierShieldBadge tier={tier} size={72} />\n          <div className=\"flex-1\">\n            <h3 className=\"text-lg font-bold text-slate-900\">\n              Current Tier: Tier {tier} ({tierName})\n            </h3>\n            <p className=\"text-sm mt-1 text-slate-900/70\">\n              {tier === 1 && \"Basic access \u2014 deals up to $1M, standard matching, basic counterparty visibility.\"}\n              {tier === 2 && \"Enhanced access \u2014 deals up to $50M, priority matching, enhanced counterparty data.\"}\n              {tier === 3 && \"Full institutional access \u2014 unlimited deal size, premium matching, all counterparties.\"}\n            </p>\n          </div>\n          {tier < 2 && (\n            <Button\n              className=\"cursor-pointer font-semibold bg-[#C4972A] text-white h-12 px-6 hover:bg-[#B3882A]\"\n              onClick={() => setUpgradeOpen(true)}\n            >\n              Upgrade to Tier 2\n            </Button>\n          )}\n        </div>\n      </div>\n\n      {/* Tier Comparison Table */}\n      <div className=\"card-elevated p-6 overflow-hidden\">\n        <h3 className=\"mb-4 data-label\">Tier Comparison</h3>\n        <div className=\"overflow-x-auto\">\n            <table className=\"w-full text-sm\">\n              <thead>\n                <tr className=\"bg-slate-900/[0.04]\">\n                  <th className=\"text-left px-6 py-3 font-semibold text-slate-900\">\n                    Feature\n                  </th>\n                  {[1, 2, 3].map((t) => (\n                    <th\n                      key={t}\n                      className={`px-6 py-3 font-semibold text-center ${tier === t ? \"border-l border-r border-[#C4972A]/25\" : \"\"}`}\n                      style={{\n                        color: C.navy,\n                        borderBottom: tier === t ? `2px solid ${C.blue}` : undefined,\n                      }}\n                    >\n                      Tier {t}\n                      {tier === t && (\n                        <span className=\"ml-1.5 text-[10px] font-bold uppercase text-blue-600\">\n                          Current\n                        </span>\n                      )}\n                    </th>\n                  ))}\n                </tr>\n              </thead>\n              <tbody>\n                {TIER_FEATURES.map((f, i) => (\n                  <tr key={i} className=\"border-t\" style={{ borderColor: C.border }}>\n                    <td className=\"px-6 py-3 font-medium\" style={{ color: C.steel }}>\n                      {f.label}\n                    </td>\n                    {([f.t1, f.t2, f.t3] as const).map((val, ti) => (\n                      <td\n                        key={ti}\n                        className={`px-6 py-3 text-center ${tier === ti + 1 ? \"border-l border-r border-[#C4972A]/25\" : \"\"}`}\n                        style={{\n                          color: tier === ti + 1 ? C.blue : `${C.navy}70`,\n                          fontWeight: tier === ti + 1 ? 600 : 400,\n                          backgroundColor: tier === ti + 1 ? `${C.blue}06` : undefined,\n                        }}\n                      >\n                        {val}\n                      </td>\n                    ))}\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n      </div>\n\n      {/* \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n          F1: Verification Documents (Upload + List)\n         \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550 */}\n\n      <VerificationDocumentsSection />\n\n      {/* \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n          Compliance Passport\n         \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550 */}\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        {/* E25: Passport Card with GlowingBorder */}\n        <GlowingBorder color={C.gold}>\n        <div\n          className=\"rounded-2xl overflow-hidden shadow-lg\"\n          style={{ border: `1px solid ${C.border}` }}\n        >\n          {/* Navy header */}\n          <div className=\"px-6 py-4 flex items-center justify-between bg-slate-900\">\n            <span className=\"text-white font-bold text-sm tracking-widest uppercase\">ANAVI</span>\n            <span className=\"text-white/50 text-xs\">Compliance Passport</span>\n          </div>\n\n          <div className=\"bg-white p-6 space-y-4\">\n            <div className=\"flex items-start justify-between\">\n              <div>\n                <div className=\"text-xs uppercase tracking-wide mb-1\" style={{ color: `${C.navy}60` }}>\n                  Participant\n                </div>\n                <div className=\"font-bold text-lg text-slate-900\">\n                  {user?.name ?? \"\u2014\"}\n                </div>\n                <div className=\"text-xs mt-0.5\" style={{ color: `${C.navy}50` }}>\n                  ID: {user?.id != null ? String(user.id).slice(0, 8) : \"\u2014\"}\n                </div>\n              </div>\n              <div className=\"flex flex-col items-end gap-2\">\n                <Badge\n                  className=\"border-0 font-semibold\"\n                  style={{ backgroundColor: tier >= 2 ? `${C.gold}20` : `${C.steel}20`, color: tier >= 2 ? C.gold : C.steel }}\n                >\n                  Tier {tier}\n                </Badge>\n                <span className=\"font-mono text-xl font-bold\" style={{ color: overallColor }}>\n                  {trustScore}\n                </span>\n              </div>\n            </div>\n\n            <div className=\"flex gap-4\">\n              {[\n                { label: \"KYC\", ok: true },\n                { label: \"AML\", ok: true },\n                { label: \"Sanctions\", ok: true },\n              ].map((c) => (\n                <div\n                  key={c.label}\n                  className=\"flex items-center gap-1.5 text-xs font-semibold\"\n                  style={{ color: c.ok ? C.green : C.red }}\n                >\n                  {c.ok ? <Check className=\"w-3.5 h-3.5\" /> : <X className=\"w-3.5 h-3.5\" />}\n                  {c.label}\n                </div>\n              ))}\n            </div>\n\n            <div className=\"flex items-end justify-between pt-2 border-t\" style={{ borderColor: C.border }}>\n              <div className=\"space-y-1\">\n                <div className=\"text-[10px] uppercase tracking-wide\" style={{ color: `${C.navy}50` }}>\n                  Issued\n                </div>\n                <div className=\"text-xs font-medium\" style={{ color: C.navy }}>\n                  {new Date().toLocaleDateString(\"en-US\", { month: \"short\", day: \"numeric\", year: \"numeric\" })}\n                </div>\n                <div className=\"text-[10px] uppercase tracking-wide mt-2\" style={{ color: `${C.navy}50` }}>\n                  Next Renewal\n                </div>\n                <div className=\"text-xs font-medium\" style={{ color: C.navy }}>\n                  {new Date(Date.now() + 365 * 86400000).toLocaleDateString(\"en-US\", { month: \"short\", day: \"numeric\", year: \"numeric\" })}\n                </div>\n              </div>\n              <div\n                className=\"w-16 h-16 rounded-lg flex items-center justify-center\"\n                style={{ backgroundColor: `${C.navy}08` }}\n              >\n                <QrCode className=\"w-8 h-8\" style={{ color: `${C.navy}30` }} />\n              </div>\n            </div>\n          </div>\n        </div>\n        </GlowingBorder>\n\n        {/* Share Controls */}\n        <div className=\"card-elevated p-6\">\n          <h3 className=\"mb-4 data-label\">Share & Access</h3>\n          <div className=\"space-y-5\">\n            <div>\n              <label className=\"text-xs font-semibold uppercase tracking-wide mb-2 block\" style={{ color: `${C.navy}60` }}>\n                Shareable Verification Link\n              </label>\n              {shareUrl ? (\n                <ShareLinkRow url={shareUrl} />\n              ) : (\n                <Button\n                  className=\"w-full cursor-pointer\"\n                  style={{ backgroundColor: C.blue, color: \"white\", height: 48 }}\n                  onClick={() => setShareUrl(`https://anavi.io/verify/${user?.id != null ? String(user.id).slice(0, 8) : \"abc123\"}`)}\n                >\n                  Generate Shareable Link\n                </Button>\n              )}\n            </div>\n\n            <div>\n              <label className=\"text-xs font-semibold uppercase tracking-wide mb-2 block\" style={{ color: `${C.navy}60` }}>\n                API Key\n              </label>\n              <div className=\"flex items-center gap-2\">\n                <input\n                  readOnly\n                  value={maskedKey}\n                  className=\"flex-1 rounded-lg text-sm font-mono px-4\"\n                  style={{ height: 48, border: `1px solid ${C.border}`, color: C.navy }}\n                />\n                <Button\n                  variant=\"outline\"\n                  className=\"cursor-pointer\"\n                  style={{ height: 48, borderColor: C.border }}\n                  onClick={() => {\n                    navigator.clipboard.writeText(maskedKey);\n                    toast.success(\"API key copied\");\n                  }}\n                >\n                  <Copy className=\"w-4 h-4\" />\n                </Button>\n              </div>\n            </div>\n\n            <div\n              className=\"flex items-center gap-2 px-4 py-3 rounded-lg text-sm\"\n              style={{ backgroundColor: `${C.green}08`, color: C.green }}\n            >\n              <Lock className=\"w-4 h-4\" />\n              <span className=\"font-medium\">Accepted by {PARTNER_COUNT} institutional partners</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n",
  "changes_summary": [
    "Replaced the `DIMENSIONS` array with `DIMENSIONS_CONFIG` to align with whitepaper's six Trust Score components: 'KYB Depth', 'Transaction History', 'Dispute Outcomes', 'Peer Attestations', 'Platform Tenure', and 'Identity Verification'.",
    "Updated `RadarChart` and individual component score cards to use `radarScores` and `componentDisplayData` derived from `trustData.components` (when available) or `DIMENSIONS_CONFIG` as a fallback, ensuring correct data mapping and display.",
    "Added `Fingerprint` icon to `lucide-react` imports for 'Identity Verification' dimension.",
    "Added a `PARTNER_COUNT` constant (set to 12) and replaced the hardcoded string '12 institutional partners' with a dynamic reference to this constant.",
    "Added a `TODO` comment above the `SCORE_HISTORY` array, indicating it should be replaced with live data from `trpc.user.getTrustScoreHistory`.",
    "Modified the main tier badge to display the whitepaper-aligned tier names ('Basic', 'Enhanced', 'Institutional') alongside the tier number (e.g., 'Tier 1 (Basic)')."
  ],
  "whitepaper_terms_added": [
    "KYB Depth",
    "Transaction History",
    "Dispute Outcomes",
    "Peer Attestations",
    "Platform Tenure",
    "Identity Verification",
    "Basic (Tier)",
    "Enhanced (Tier)",
    "Institutional (Tier)"
  ],
  "copy_tokens_used": []
}