{
  "meta": {
    "project": "ANAVI Platform",
    "date": "2026-02-21",
    "prepared_by": "Generated by TestSprite"
  },
  "product_overview": "ANAVI is a private-markets operating system that custody-originator relationships, matches buy/sell/investment intents, and provides deal rooms, verification and attribution. This PRD focuses on demo-level enrichment (tooltips, guided tour, sales assets, animations) and enterprise-grade UI/UX and functional polish across core pages (dashboard, relationships, deal rooms, verification).",
  "core_goals": [
    "Make the Demo interactive and sales-ready via tooltips, a guided tour, and sales callouts to support $2M+ stakeholder demos",
    "Surface a premium UI/UX: consistent typography, staggered animations, number counters and micro-interactions across interior pages",
    "Complete key functional flows (Deal Room interior, document upload simulation, diligence persistence) and enforce consistent loading/empty/error states",
    "Improve trust and verification visibility (Trust Score, tier badges, verification status) and enable navigation/feedback (toasts, restart tour)",
    "Fix auth/API contract issues and ensure predictable redirects, route placeholders (Intelligence) and password-reset UX"
  ],
  "features": [
    {
      "name": "User Login",
      "description": "Authenticate existing users via email and password and navigate to the main dashboard on success; surface clear error messages on failure.",
      "user_flows": [
        "Navigate to /login -> Fill email input field -> Fill password input field -> Click Login button to submit -> See dashboard at /dashboard",
        "Navigate to /login -> Fill email input field with wrong password -> Click Login button to submit -> See error message on invalid credentials"
      ]
    },
    {
      "name": "User Registration",
      "description": "Create a new account via the registration form; ensure API fields match server expectations and surface registration errors.",
      "user_flows": [
        "Navigate to /register -> Fill name input field -> Fill email input field -> Fill password input field -> Click Register button -> See dashboard at /dashboard",
        "Navigate to /register -> Fill email that is already registered -> Click Register button -> See error message returned by server"
      ]
    },
    {
      "name": "Forgot Password",
      "description": "Allow users to request a password reset link with an email; show a generic success message to avoid account enumeration.",
      "user_flows": [
        "Navigate to /forgot-password -> Fill email input field -> Click Send reset link -> See success message 'If an account exists, we've sent a link to your email'",
        "Navigate to /forgot-password -> Fill invalid email format -> Click Send reset link -> See validation error message"
      ]
    },
    {
      "name": "Demo Experience (Tooltips & Guided Tour)",
      "description": "Provide a premium demo flow on /demo with contextual ConceptTooltips, a 5â€“7 step GuidedTour, dismissible sales callouts and a Restart Tour control.",
      "user_flows": [
        "Navigate to /demo -> See Demo banner and value callouts -> Click 'Start Tour' in demo banner -> See tour step highlighting dashboard area -> Click Next in tour -> Navigate to /relationships -> See tooltip on first relationship card -> Click Next in tour -> Navigate to /matches -> See blind matching tooltip on first match card -> Click Next in tour -> Navigate to /deal-rooms -> Click first deal room -> See Deal Room overview highlighted -> Click 'Restart Tour' link -> Tour restarts from first step",
        "Navigate to /demo -> Click 'Start Tour' -> Tour attempts to highlight a DOM target that is not present -> See fallback 'Skip Tour' and 'Restart Tour' options in banner"
      ]
    },
    {
      "name": "Dashboard",
      "description": "Main dashboard surface showing key metrics, Trust Ring animation, personalized greeting and quick navigation; handle loading and error states consistently.",
      "user_flows": [
        "Navigate to /dashboard -> View dashboard cards and stats -> See Trust Ring animate on mount -> Click Trust Score card -> Navigate to /verification",
        "Navigate to /dashboard -> Dashboard data query is loading -> See skeleton loaders for stat cards -> Data fetch fails -> See error alert with 'Try Again' button"
      ]
    },
    {
      "name": "Deal Rooms (List & Detail)",
      "description": "List deal rooms at /deal-rooms, open a room to view tabs (Overview, Documents, Diligence) and interact with document upload and tab transitions.",
      "user_flows": [
        "Navigate to /deal-rooms -> View deal rooms list -> Click a deal room card -> Navigate to /deal-rooms/:id -> See Overview tab content -> Click Documents tab -> See documents list",
        "Navigate to /deal-rooms -> API returns an error for the list -> See error alert with a 'Retry' button"
      ]
    },
    {
      "name": "Relationships",
      "description": "Manage relationship custody: view the relationships list, search/filter, add or edit a relationship, and surface custody/hash tooltips and empty states.",
      "user_flows": [
        "Navigate to /relationships -> View relationships list -> Use search input to filter results -> Click Add Relationship -> Fill required fields -> Click Save -> See new relationship in list",
        "Navigate to /relationships -> Relationship list query is loading -> See loading skeleton -> No relationships returned -> See EmptyState explaining next steps"
      ]
    },
    {
      "name": "Verification & Trust Score",
      "description": "Show verification status and Trust Score on /verification with tier badges and animated score counters; surface errors and loading states consistently.",
      "user_flows": [
        "Navigate to /verification -> View verification status panel -> See Trust Score and tier badge animate on first view",
        "Navigate to /verification -> Verification query fails -> See error alert with guidance to retry or contact support"
      ]
    },
    {
      "name": "Navigation (Sidebar & Header)",
      "description": "Global navigation via the sidebar and header: navigate between pages, open the user menu, and handle 'coming soon' placeholders like Intelligence.",
      "user_flows": [
        "Navigate to /dashboard -> Click sidebar item 'Matches' -> Navigate to /matches -> Click header user menu -> User menu opens",
        "Navigate to /dashboard -> Click sidebar item 'Intelligence' -> Navigate to /intelligence -> See 'Coming Soon' placeholder page with link back to /dashboard"
      ]
    },
    {
      "name": "Deal Matching",
      "description": "View deal-matching and matches lists, inspect top matches and trigger match actions (accept/decline) with undo and toast feedback.",
      "user_flows": [
        "Navigate to /deal-matching -> View matching results and top match card -> Click top match card -> See match detail panel or review view -> Click Accept -> See toast 'Intent Published' or success confirmation",
        "Navigate to /deal-matching -> No matches available -> See EmptyState with guidance to create an Intent"
      ]
    },
    {
      "name": "Audit Logs",
      "description": "View append-only audit logs at /audit-logs with filtering and CSV export so admins can investigate actions and download results.",
      "user_flows": [
        "Navigate to /audit-logs -> See audit entries list -> Use filter dropdown to select event type -> Click Export CSV -> Download CSV file of visible entries",
        "Navigate to /audit-logs -> Export CSV request times out -> See error alert with option to retry"
      ]
    }
  ],
  "code_summary": {
    "version": "2",
    "type": "frontend",
    "tech_stack": [
      "TypeScript",
      "React 19",
      "Vite",
      "Tailwind CSS",
      "shadcn/ui",
      "wouter",
      "tRPC React Query",
      "framer-motion"
    ],
    "routes": [
      {
        "path": "/",
        "file": "client/src/pages/Home.tsx",
        "auth_required": false,
        "description": "Landing page"
      },
      {
        "path": "/login",
        "file": "client/src/pages/Login.tsx",
        "auth_required": false,
        "description": "User login page"
      },
      {
        "path": "/register",
        "file": "client/src/pages/Register.tsx",
        "auth_required": false,
        "description": "User registration"
      },
      {
        "path": "/forgot-password",
        "file": "client/src/pages/ForgotPassword.tsx",
        "auth_required": false,
        "description": "Password reset"
      },
      {
        "path": "/demo",
        "file": "client/src/pages/Demo.tsx",
        "auth_required": false,
        "description": "Demo flow"
      },
      {
        "path": "/dashboard",
        "file": "client/src/pages/Dashboard.tsx",
        "auth_required": false,
        "description": "Main dashboard"
      },
      {
        "path": "/relationships",
        "file": "client/src/pages/Relationships.tsx",
        "auth_required": false,
        "description": "Relationship management"
      },
      {
        "path": "/deal-matching",
        "file": "client/src/pages/DealMatching.tsx",
        "auth_required": false,
        "description": "Deal matching flow"
      },
      {
        "path": "/deal-rooms",
        "file": "client/src/pages/DealRooms.tsx",
        "auth_required": false,
        "description": "Deal rooms list"
      },
      {
        "path": "/deal-rooms/:id",
        "file": "client/src/pages/DealRoom.tsx",
        "auth_required": false,
        "description": "Deal room detail"
      },
      {
        "path": "/deals",
        "file": "client/src/pages/Deals.tsx",
        "auth_required": false,
        "description": "Deals list"
      },
      {
        "path": "/deal-intelligence",
        "file": "client/src/pages/DealIntelligence.tsx",
        "auth_required": false,
        "description": "Deal intelligence"
      },
      {
        "path": "/intents",
        "file": "client/src/pages/Intents.tsx",
        "auth_required": false,
        "description": "Intents management"
      },
      {
        "path": "/matches",
        "file": "client/src/pages/Matches.tsx",
        "auth_required": false,
        "description": "Matches list"
      },
      {
        "path": "/family-offices",
        "file": "client/src/pages/FamilyOffices.tsx",
        "auth_required": false,
        "description": "Family offices"
      },
      {
        "path": "/targeting",
        "file": "client/src/pages/Targeting.tsx",
        "auth_required": false,
        "description": "Targeting"
      },
      {
        "path": "/network",
        "file": "client/src/pages/Network.tsx",
        "auth_required": false,
        "description": "Network graph"
      },
      {
        "path": "/verification",
        "file": "client/src/pages/Verification.tsx",
        "auth_required": false,
        "description": "Verification status"
      },
      {
        "path": "/audit-logs",
        "file": "client/src/pages/AuditLogs.tsx",
        "auth_required": false,
        "description": "Audit logs"
      },
      {
        "path": "/compliance",
        "file": "client/src/pages/Compliance.tsx",
        "auth_required": false,
        "description": "Compliance"
      },
      {
        "path": "/payouts",
        "file": "client/src/pages/Payouts.tsx",
        "auth_required": false,
        "description": "Payouts"
      },
      {
        "path": "/lp-portal",
        "file": "client/src/pages/LPPortal.tsx",
        "auth_required": false,
        "description": "LP Portal"
      },
      {
        "path": "/analytics",
        "file": "client/src/pages/Analytics.tsx",
        "auth_required": false,
        "description": "Analytics"
      },
      {
        "path": "/ai-brain",
        "file": "client/src/pages/AIBrain.tsx",
        "auth_required": false,
        "description": "AI Brain"
      },
      {
        "path": "/intelligence",
        "file": "client/src/pages/Intelligence.tsx",
        "auth_required": false,
        "description": "Intelligence"
      },
      {
        "path": "/calendar",
        "file": "client/src/pages/Calendar.tsx",
        "auth_required": false,
        "description": "Calendar"
      },
      {
        "path": "/settings",
        "file": "client/src/pages/Settings.tsx",
        "auth_required": false,
        "description": "Settings"
      }
    ],
    "features": [
      {
        "name": "User Login",
        "description": "Login with email and password credentials",
        "files": [
          "client/src/pages/Login.tsx",
          "client/src/_core/hooks/useAuth.ts"
        ],
        "entry_route": "/login",
        "user_interactions": [
          "Fill email input field",
          "Fill password input field",
          "Click Login button to submit",
          "See error message on invalid credentials"
        ],
        "api_calls": [
          {
            "method": "POST",
            "endpoint": "/api/trpc/auth.login"
          }
        ],
        "auth_required": false
      },
      {
        "name": "Dashboard",
        "description": "View main dashboard with key metrics",
        "files": [
          "client/src/pages/Dashboard.tsx"
        ],
        "entry_route": "/dashboard",
        "user_interactions": [
          "View dashboard cards and stats",
          "Navigate via sidebar"
        ],
        "api_calls": [
          {
            "method": "GET",
            "endpoint": "tRPC queries for dashboard data"
          }
        ],
        "auth_required": false
      },
      {
        "name": "Deal Rooms",
        "description": "List and view deal rooms",
        "files": [
          "client/src/pages/DealRooms.tsx",
          "client/src/pages/DealRoom.tsx"
        ],
        "entry_route": "/deal-rooms",
        "user_interactions": [
          "View deal rooms list",
          "Click deal room to open detail",
          "Switch tabs in deal room (Overview, Documents, etc.)"
        ],
        "api_calls": [
          {
            "method": "GET",
            "endpoint": "tRPC dealRoom procedures"
          }
        ],
        "auth_required": false
      },
      {
        "name": "Relationships",
        "description": "Manage relationships and contacts",
        "files": [
          "client/src/pages/Relationships.tsx"
        ],
        "entry_route": "/relationships",
        "user_interactions": [
          "View relationships list",
          "Search or filter relationships",
          "Add or edit relationship"
        ],
        "api_calls": [
          {
            "method": "GET",
            "endpoint": "tRPC relationship procedures"
          }
        ],
        "auth_required": false
      },
      {
        "name": "Verification",
        "description": "View verification status and trust score",
        "files": [
          "client/src/pages/Verification.tsx"
        ],
        "entry_route": "/verification",
        "user_interactions": [
          "View verification status",
          "See trust score"
        ],
        "api_calls": [
          {
            "method": "GET",
            "endpoint": "tRPC verification procedures"
          }
        ],
        "auth_required": false
      },
      {
        "name": "Navigation",
        "description": "Navigate app via sidebar and header",
        "files": [
          "client/src/components/DashboardLayout.tsx"
        ],
        "entry_route": "/dashboard",
        "user_interactions": [
          "Click sidebar items to navigate",
          "Use global search",
          "Open user menu"
        ],
        "api_calls": [],
        "auth_required": false
      }
    ],
    "known_limitations": [
      {
        "issue": "Some pages use demo/mock data (Commodities, TransactionMatching, CapitalManagement, TradingPlatform, CryptoAssets, MemberOnboarding, FeeManagement)",
        "location": "Various page components",
        "impact": "Data may not persist to backend"
      }
    ]
  }
}
